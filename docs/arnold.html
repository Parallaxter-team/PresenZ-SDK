<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PresenZ SDK: Implementation in Arnold</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PresenZ SDK<span id="projectnumber">&#160;4.0.6</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('arnold.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Implementation in Arnold</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__c_1_2jk_2workspace_2_presen_z___s_d_k__master_0d2_2resources_2_s_d_k_2manual_210-implementation-arnold"></a> Here is the implementation code for <a class="el" href="namespace_presen_z.html">PresenZ</a> inside SolidAngle Arnold.</p>
<h1><a class="anchor" id="autotoc_md53"></a>
10.1 Camera</h1>
<div class="fragment"></div><!-- fragment --><h1><a class="anchor" id="autotoc_md54"></a>
10.2 AOV shader</h1>
<div class="fragment"></div><!-- fragment --><h1><a class="anchor" id="autotoc_md55"></a>
10.3 Intersection shader</h1>
<div class="fragment"></div><!-- fragment --><h1><a class="anchor" id="autotoc_md56"></a>
10.4 Filter</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ai.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;arnoldWrapper.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;presenz_global_parameters.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_bucket_api_8h.html">API/PzBucketApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_render_sample_api_8h.html">API/PzRenderSampleApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_detect_sample_api_8h.html">API/PzDetectSampleApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_phase_api_8h.html">API/PzPhaseApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_cryptomatte_api_8h.html">API/PzCryptomatteApi.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">AI_FILTER_NODE_EXPORT_METHODS(PresenZFilterMethods);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_presen_z_1_1_phase.html">PresenZ::Phase</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_presen_z_1_1_bin_i_o.html">PresenZ::BinIO</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_presen_z_1_1_render_sample.html">PresenZ::RenderSample</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_presen_z_1_1_cryptomatte.html">PresenZ::Cryptomatte</a>;</div>
<div class="line"> </div>
<div class="line">node_parameters</div>
<div class="line">{</div>
<div class="line">    AiParameterFlt(<span class="stringliteral">&quot;width&quot;</span>, 1.0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">node_initialize</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//static const char* necessary_aovs[] = { &quot;FLOAT Z&quot;, &quot;VECTOR P&quot;, &quot;VECTOR prz_geometricnormal&quot;, nullptr };</span></div>
<div class="line">    AiFilterInitialize(node, <span class="keyword">true</span>, NULL);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">node_finish</div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">node_update</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//AiFilterUpdate(node, AiNodeGetFlt(node, &quot;width&quot;));</span></div>
<div class="line">    AiFilterUpdate(node, 1.0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">filter_output_type</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> AI_TYPE_POINTER;</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> filter_detect(AtNode* node, AtAOVSampleIterator* iterator, <span class="keywordtype">void</span>* data_out, uint8_t data_type)</div>
<div class="line">{</div>
<div class="line">    AtString AOVFiltered = AiAOVSampleIteratorGetAOVName(iterator);</div>
<div class="line">    <span class="keywordflow">if</span> ( AOVFiltered == detectTBestCamStr) {</div>
<div class="line">        </div>
<div class="line">        FilterDataDetect* out_data = <span class="keyword">new</span> FilterDataDetect();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span> (AiAOVSampleIteratorGetNext(iterator)) {</div>
<div class="line">            <span class="keywordflow">while</span> (AiAOVSampleIteratorGetNextDepth(iterator)) {</div>
<div class="line">                <a class="code hl_struct" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html">PresenZ::DetectSample::SaveDataStructure</a> info;</div>
<div class="line">                <span class="keywordtype">int</span> bestCam = AiAOVSampleIteratorGetAOVInt(iterator, detectTBestCamStr);</div>
<div class="line">                <span class="comment">// We don&#39;t actually have a real value in that case.</span></div>
<div class="line">                <span class="keywordflow">if</span> (bestCam == -1)</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a1cdedf2e87044c140c64183314f9d522">bestCam</a> = bestCam;</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a9267c6b3eae71d461769e6ea6a8fe2c0">camera</a> = AiAOVSampleIteratorGetAOVInt(iterator, detectCameraStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a2228d652eb39da15933e2b9345893951">expSize</a> = AiAOVSampleIteratorGetAOVInt(iterator, detectexpSizeStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a8a33ba6ff4f3da7799e33a2827f9d297">isChaotic</a> = AiAOVSampleIteratorGetAOVBool(iterator, detectChaoticStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#ac66c2e837c24a5cd822b7b42ed61558d">isDraft</a> = AiAOVSampleIteratorGetAOVBool(iterator, detectDraftStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a97876727134fadec3c9fc1dd3e6fbaff">isEstimated</a> = AiAOVSampleIteratorGetAOVBool(iterator, detectEstimatedStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#ac66daeca3e15743ee63ec77b85de6759">isFrustrum</a> = AiAOVSampleIteratorGetAOVBool(iterator, detectFrustrumStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#ad50b77be6452fcd203fa25771dd4f69e">isHair</a> = AiAOVSampleIteratorGetAOVBool(iterator, detectHairStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a1a4f15d1f73a8a725318a64a4303630c">maxZ</a> = AiAOVSampleIteratorGetAOVFlt(iterator, detectTmaxZStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a10783e24924a7160fed76c3a48530298">minZ</a> = AiAOVSampleIteratorGetAOVFlt(iterator, detectTminZStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#afdddd54644ca7c73b3d22f7b2d206ca8">normal</a> = NozVectorFromAiVector(AiAOVSampleIteratorGetAOVVec(iterator, detectTNormalStr));</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#ac132759c29737e9daf6c071e2d49db6b">transpType</a> = AiAOVSampleIteratorGetAOVInt(iterator, detectTranspTypeStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#af73583b1e980b0aa03f9884812e9fd4d">z</a> = AiAOVSampleIteratorGetAOVFlt(iterator, detectZStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a75f8ddf992db0cfc3cd1aa024086b6f3">pixelX</a> = AiAOVSampleIteratorGetAOVInt(iterator, pixelXStr);</div>
<div class="line">                info.<a class="code hl_variable" href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#aaa0423628e784003c3f5754ca1e56e70">pixelY</a> = AiAOVSampleIteratorGetAOVInt(iterator, pixelYStr);</div>
<div class="line">                out_data-&gt;data.push_back(info);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        *((<span class="keywordtype">void</span>**)data_out) = (<span class="keywordtype">void</span>*)out_data;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> filter_render(AtNode* node, AtAOVSampleIterator* iterator, <span class="keywordtype">void</span>* data_out, uint8_t data_type)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> AtUniverse* universe = AiNodeGetUniverse(node);</div>
<div class="line">    <span class="keyword">const</span> AtNode* pzCamera = AiUniverseGetCamera(universe);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> far_clip = AiNodeGetFlt(pzCamera, <span class="stringliteral">&quot;far_clip&quot;</span>);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> scene_scale = AiNodeGetFlt(pzCamera, <span class="stringliteral">&quot;presenz_scene_scale&quot;</span>);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> max_distance = far_clip - (0.1 * scene_scale);</div>
<div class="line"> </div>
<div class="line">    </div>
<div class="line">    AtString AOVFiltered = AiAOVSampleIteratorGetAOVName(iterator);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (AOVFiltered == RGBAAtStr) {</div>
<div class="line"> </div>
<div class="line">        FilterData* out_data = <span class="keyword">new</span> FilterData();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">float</span> lastTransmission = 1.0f;</div>
<div class="line">        <span class="keywordtype">int</span> lastDepth = -1;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> x, y;</div>
<div class="line">        AiAOVSampleIteratorGetPixel(iterator, x, y);</div>
<div class="line"> </div>
<div class="line">        std::vector&lt;PzRenderSample&gt; renderSamples;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span> (AiAOVSampleIteratorGetNext(iterator)) {</div>
<div class="line">            <span class="keyword">const</span> AtVector2 offset = AiAOVSampleIteratorGetOffset(iterator);</div>
<div class="line">            <span class="keywordflow">while</span> (AiAOVSampleIteratorGetNextDepth(iterator)) {</div>
<div class="line">                <span class="keyword">const</span> <span class="keywordtype">int</span> curDepth = AiAOVSampleIteratorGetDepth(iterator);</div>
<div class="line">                <span class="comment">// Depth 0, we reset the transmission.</span></div>
<div class="line">                <span class="keywordflow">if</span> (curDepth == 0) {</div>
<div class="line">                    lastTransmission = 1.0f;</div>
<div class="line">                    lastDepth = -1;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                AtRGBA <a class="code hl_enumvalue" href="namespace_presen_z_1_1_phase_1_1_p_r_e_s_e_n_z___v_e_r_s_i_o_n___n_s.html#add16db84a471b163119fa85bfa9df0fdae75845ff0980839032f4a78a0d42753c">RGBA</a> = AiAOVSampleIteratorGetRGBA(iterator);</div>
<div class="line">                <span class="comment">// Getting all our other data</span></div>
<div class="line">                <span class="keyword">const</span> AtVector P = AiAOVSampleIteratorGetAOVVec(iterator, NHitPointAtStr);</div>
<div class="line">                <span class="keyword">const</span> AtVector N = AiAOVSampleIteratorGetAOVVec(iterator, NCameraAtStr);</div>
<div class="line">                <span class="keyword">const</span> <span class="keywordtype">float</span> distance = AiAOVSampleIteratorGetAOVFlt(iterator, ZAtStr);</div>
<div class="line"> </div>
<div class="line">                <a class="code hl_struct" href="struct_presen_z_1_1_render_sample_1_1v4__0_1_1_pz_render_sample.html">PzRenderSample</a> winSample;</div>
<div class="line"> </div>
<div class="line">                <a class="code hl_function" href="group___render_sample.html#gae1426a7ec51607b5dc5d9c2b73ed4347">PzSetSamplePosition</a>(winSample, NozVectorFromAiVector(P));</div>
<div class="line">                <a class="code hl_function" href="group___render_sample.html#ga6b536a25d0cd571d05f62ba75c305f05">PzSetSampleNormal</a>(winSample, NozVectorFromAiVector(N));</div>
<div class="line">                <a class="code hl_function" href="group___render_sample.html#ga8935efb907edc5afd9ce511b72182819">PzSetSampleZ</a>(winSample, distance);</div>
<div class="line">                <a class="code hl_function" href="group___render_sample.html#ga4e2a3666a24149f5027023528ce21a5a">PzSetSamplePosXY</a>(winSample, offset.x + 0.5f, offset.y + 0.5f);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (PresenZ_data_struct::do_crypto) {</div>
<div class="line">                    <span class="keywordtype">bool</span> do_object, do_material, do_asset = <span class="keyword">false</span>;</div>
<div class="line">                    <a class="code hl_function" href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#a3404d8b67629d5291a6656c413729eaa">PzGetActiveCryptomatte</a>(do_object, do_material, do_asset);</div>
<div class="line">                    <span class="keywordflow">if</span> (do_object)</div>
<div class="line">                        <a class="code hl_function" href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#a8affba5e09de3d0672d96739f57e0961">PzSetSampleCrypto</a>(winSample, cryptoType::object, AiAOVSampleIteratorGetAOVFlt(iterator, crypto_objectAOVStr));</div>
<div class="line">                    <span class="keywordflow">if</span> (do_material)</div>
<div class="line">                        <a class="code hl_function" href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#a8affba5e09de3d0672d96739f57e0961">PzSetSampleCrypto</a>(winSample, cryptoType::material, AiAOVSampleIteratorGetAOVFlt(iterator, crypto_materialAOVStr));</div>
<div class="line">                    <span class="keywordflow">if</span> (do_asset)</div>
<div class="line">                        <a class="code hl_function" href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#a8affba5e09de3d0672d96739f57e0961">PzSetSampleCrypto</a>(winSample, cryptoType::asset, AiAOVSampleIteratorGetAOVFlt(iterator, crypto_assetAOVStr));</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordtype">bool</span> isGlass = AiAOVSampleIteratorGetAOVBool(iterator, przGlassAtStr);</div>
<div class="line">                <span class="keywordflow">if</span> (isGlass) {</div>
<div class="line">                    <span class="keyword">const</span> AtRGB transmission = AiAOVSampleIteratorGetAOVRGB(iterator, transmissionAOV);</div>
<div class="line">                    <span class="keyword">const</span> <span class="keywordtype">float</span> transmissionAlbedo = (transmission.r + transmission.g + transmission.b) / 3.0f;</div>
<div class="line"> </div>
<div class="line">                    <span class="keywordflow">if</span> (transmissionAlbedo != 0.0f) {</div>
<div class="line">                        <a class="code hl_enumvalue" href="namespace_presen_z_1_1_phase_1_1_p_r_e_s_e_n_z___v_e_r_s_i_o_n___n_s.html#add16db84a471b163119fa85bfa9df0fdae75845ff0980839032f4a78a0d42753c">RGBA</a> = AiAOVSampleIteratorGetAOVRGBA(iterator, glassRGBOVStr);</div>
<div class="line">                        <span class="keywordtype">float</span> curTransmission = 1.0f - transmissionAlbedo;</div>
<div class="line">                        <span class="keywordflow">if</span> (curDepth &gt; lastDepth) {</div>
<div class="line">                            curTransmission *= lastTransmission;</div>
<div class="line">                            lastDepth = curDepth;</div>
<div class="line">                            lastTransmission = curTransmission;</div>
<div class="line">                        }</div>
<div class="line">                        <a class="code hl_enumvalue" href="namespace_presen_z_1_1_phase_1_1_p_r_e_s_e_n_z___v_e_r_s_i_o_n___n_s.html#add16db84a471b163119fa85bfa9df0fdae75845ff0980839032f4a78a0d42753c">RGBA</a>.a = curTransmission;</div>
<div class="line">                        <a class="code hl_function" href="group___render_sample.html#gab1f9d16753fb9da84735c3138032ef97">PzAddGlassSampleAov</a>(winSample, 1);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                        <a class="code hl_function" href="group___render_sample.html#gab1f9d16753fb9da84735c3138032ef97">PzAddGlassSampleAov</a>(winSample, 0);</div>
<div class="line"> </div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    <a class="code hl_function" href="group___render_sample.html#gab1f9d16753fb9da84735c3138032ef97">PzAddGlassSampleAov</a>(winSample, 0);</div>
<div class="line"> </div>
<div class="line">                <a class="code hl_function" href="group___render_sample.html#ga1363397bd1f19ac5231055543875c744">PzSetSampleColor</a>(winSample, NozRGBAFromAiRGBA(RGBA));</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (AiAOVSampleIteratorHasAOVValue(iterator, velocityAtStr, AI_TYPE_VECTOR))</div>
<div class="line">                    <a class="code hl_function" href="group___render_sample.html#ga80538f930119a325ca534c896e490597">PzAddVelocitySampleAov</a>(winSample, NozVectorFromAiVector(AiAOVSampleIteratorGetAOVVec(iterator, velocityAtStr)));</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Matte objects</span></div>
<div class="line">                <span class="keywordflow">if</span>(distance == 0.0f)</div>
<div class="line">                    <a class="code hl_function" href="group___render_sample.html#ga8935efb907edc5afd9ce511b72182819">PzSetSampleZ</a>(winSample, <a class="code hl_define" href="constant_8h.html#a22dd49f4a5b95f2951748a7bef17d100">NOZ_INFINITE</a>);</div>
<div class="line">                <span class="comment">// Fixing dome/max clip plane samples</span></div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (distance &gt;= max_distance) { <span class="comment">//Hit the skydome sphere, need to recompute hitpoint and normal with virtual sphere around ZOV</span></div>
<div class="line">                    <span class="keywordflow">if</span>(<a class="code hl_enumvalue" href="namespace_presen_z_1_1_phase_1_1_p_r_e_s_e_n_z___v_e_r_s_i_o_n___n_s.html#add16db84a471b163119fa85bfa9df0fdae75845ff0980839032f4a78a0d42753c">RGBA</a>.a == 0.0) {</div>
<div class="line">                        <span class="comment">// Alpha at 0 = We hit nothing. We set the sample as a background one.</span></div>
<div class="line">                        <a class="code hl_function" href="group___render_sample.html#ga8935efb907edc5afd9ce511b72182819">PzSetSampleZ</a>(winSample, <a class="code hl_define" href="constant_8h.html#a22dd49f4a5b95f2951748a7bef17d100">NOZ_INFINITE</a>);</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        <a class="code hl_struct" href="struct_noz_point.html">NozPoint</a> camPos = <a class="code hl_function" href="group___pz_phase_api.html#gaf907558c917636b2f0cad787e5b1dda3">PresenZ::Phase::PzGetZOVWorldPosition</a>();</div>
<div class="line">                        <a class="code hl_struct" href="struct_noz_point.html">NozVector</a> rayDir(NozVectorFromAiVector(AiAOVSampleIteratorGetAOVVec(iterator, rayDirAOVStr)));</div>
<div class="line">                        <span class="keywordflow">if</span>(<a class="code hl_function" href="group___n_o_z__vector.html#ga145b6f75c1c66f24c8c4ab97f9564a55">NozVecLength</a>(rayDir) != 0) {</div>
<div class="line">                            <a class="code hl_struct" href="struct_noz_point.html">NozVector</a> rayOrigin(NozVectorFromAiVector(AiAOVSampleIteratorGetAOVVec(iterator, rayOrigAOVStr)));</div>
<div class="line">                            std::vector&lt;float&gt; distances = hit_sphere(camPos, max_distance, rayDir, rayOrigin);</div>
<div class="line">                            <a class="code hl_function" href="group___render_sample.html#gae1426a7ec51607b5dc5d9c2b73ed4347">PzSetSamplePosition</a>(winSample, rayOrigin + (rayDir * distances[0]));</div>
<div class="line">                            <a class="code hl_function" href="group___render_sample.html#ga6b536a25d0cd571d05f62ba75c305f05">PzSetSampleNormal</a>(winSample, -rayDir);</div>
<div class="line">                            <a class="code hl_function" href="group___render_sample.html#ga8935efb907edc5afd9ce511b72182819">PzSetSampleZ</a>(winSample, distances[0]);</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordtype">size_t</span> numAovs = <a class="code hl_function" href="group___pz_phase_api.html#ga800b20ae7724b268fd3d82134ea96a46">PzRenderPhaseGetNumAov</a>();</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numAovs; ++i) {</div>
<div class="line">                    std::string name;</div>
<div class="line">                    PresenZ::Phase::AOVType type;</div>
<div class="line">                    <a class="code hl_function" href="group___pz_phase_api.html#ga6063c2c114e7a465b965556590be3164">PzGetAOVInfo</a>(i, name, type);</div>
<div class="line"> </div>
<div class="line">                    AtString AOVname(name.c_str());</div>
<div class="line">                    <span class="keywordflow">if</span> (AOVname != przvelocityAtStr &amp;&amp; AOVname != presenzStr) {</div>
<div class="line">                        <span class="keywordflow">switch</span> (type) {</div>
<div class="line">                            <span class="keywordflow">case</span> PresenZ::Phase::AOVType::INT: {</div>
<div class="line">                                <span class="keyword">auto</span> value = AiAOVSampleIteratorGetAOVInt(iterator, AOVname);</div>
<div class="line">                                <a class="code hl_function" href="group___render_sample.html#ga9a7159997ae0ca7d7656d7fe180fd190">PzAddSampleAov</a>(winSample, (<span class="keywordtype">void</span>*)&amp;value, name); <span class="keywordflow">break</span>;</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">case</span> PresenZ::Phase::AOVType::BOOL: {</div>
<div class="line">                                <span class="keyword">auto</span> value = AiAOVSampleIteratorGetAOVBool(iterator, AOVname);</div>
<div class="line">                                <a class="code hl_function" href="group___render_sample.html#ga9a7159997ae0ca7d7656d7fe180fd190">PzAddSampleAov</a>(winSample, (<span class="keywordtype">void</span>*)&amp;value, name); <span class="keywordflow">break</span>;</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">case</span> PresenZ::Phase::AOVType::FLOAT: {</div>
<div class="line">                                <span class="keyword">auto</span> value = AiAOVSampleIteratorGetAOVFlt(iterator, AOVname);</div>
<div class="line">                                <a class="code hl_function" href="group___render_sample.html#ga9a7159997ae0ca7d7656d7fe180fd190">PzAddSampleAov</a>(winSample, (<span class="keywordtype">void</span>*)&amp;value, name); <span class="keywordflow">break</span>;</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">case</span> PresenZ::Phase::AOVType::RGB: {</div>
<div class="line">                                <span class="keyword">auto</span> value = AiAOVSampleIteratorGetAOVRGB(iterator, AOVname);</div>
<div class="line">                                <a class="code hl_function" href="group___render_sample.html#ga9a7159997ae0ca7d7656d7fe180fd190">PzAddSampleAov</a>(winSample, (<span class="keywordtype">void</span>*)&amp;value, name); <span class="keywordflow">break</span>;</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">case</span> PresenZ::Phase::AOVType::RGBA: {</div>
<div class="line">                                <span class="keyword">auto</span> value = AiAOVSampleIteratorGetAOVRGBA(iterator, AOVname);</div>
<div class="line">                                <a class="code hl_function" href="group___render_sample.html#ga9a7159997ae0ca7d7656d7fe180fd190">PzAddSampleAov</a>(winSample, (<span class="keywordtype">void</span>*)&amp;value, name); <span class="keywordflow">break</span>;</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">case</span> PresenZ::Phase::AOVType::VEC: {</div>
<div class="line">                                <span class="keyword">auto</span> value = AiAOVSampleIteratorGetAOVVec(iterator, AOVname);</div>
<div class="line">                                <a class="code hl_function" href="group___render_sample.html#ga9a7159997ae0ca7d7656d7fe180fd190">PzAddSampleAov</a>(winSample, (<span class="keywordtype">void</span>*)&amp;value, name); <span class="keywordflow">break</span>;</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">case</span> PresenZ::Phase::AOVType::VEC2: {</div>
<div class="line">                                <span class="keyword">auto</span> value = AiAOVSampleIteratorGetAOVVec2(iterator, AOVname);</div>
<div class="line">                                <a class="code hl_function" href="group___render_sample.html#ga9a7159997ae0ca7d7656d7fe180fd190">PzAddSampleAov</a>(winSample, (<span class="keywordtype">void</span>*)&amp;value, name); <span class="keywordflow">break</span>;</div>
<div class="line">                            }</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                renderSamples.push_back(winSample);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (renderSamples.empty() == <span class="keyword">false</span>)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_function" href="group___render_sample.html#ga4c8496dbbcbc7811f2ba58fd44f6661e">PzSetSamplesCount</a>(x, y, renderSamples.size());</div>
<div class="line">            <a class="code hl_function" href="group___render_sample.html#gae715ceee4ccb12e2ac960c8de76b40a8">PzFilterRenderSample</a>(x, y, renderSamples, out_data-&gt;data);</div>
<div class="line">        }</div>
<div class="line">    </div>
<div class="line">        *((<span class="keywordtype">void</span>**)data_out) = (<span class="keywordtype">void</span>*)out_data;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">filter_pixel</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (PresenZ_data_struct::pass == PresenZ::Phase::Detect || PresenZ_data_struct::pass == PresenZ::Phase::Detect_Reflection)</div>
<div class="line">        filter_detect(node, iterator, data_out, data_type);</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PresenZ_data_struct::pass == PresenZ::Phase::Render || PresenZ_data_struct::pass == PresenZ::Phase::Render_Reflection)</div>
<div class="line">        filter_render(node, iterator, data_out, data_type);</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="a_pz_bucket_api_8h_html"><div class="ttname"><a href="_pz_bucket_api_8h.html">PzBucketApi.h</a></div></div>
<div class="ttc" id="a_pz_cryptomatte_api_8h_html"><div class="ttname"><a href="_pz_cryptomatte_api_8h.html">PzCryptomatteApi.h</a></div></div>
<div class="ttc" id="a_pz_detect_sample_api_8h_html"><div class="ttname"><a href="_pz_detect_sample_api_8h.html">PzDetectSampleApi.h</a></div></div>
<div class="ttc" id="a_pz_phase_api_8h_html"><div class="ttname"><a href="_pz_phase_api_8h.html">PzPhaseApi.h</a></div></div>
<div class="ttc" id="a_pz_render_sample_api_8h_html"><div class="ttname"><a href="_pz_render_sample_api_8h.html">PzRenderSampleApi.h</a></div></div>
<div class="ttc" id="aconstant_8h_html_a22dd49f4a5b95f2951748a7bef17d100"><div class="ttname"><a href="constant_8h.html#a22dd49f4a5b95f2951748a7bef17d100">NOZ_INFINITE</a></div><div class="ttdeci">#define NOZ_INFINITE</div><div class="ttdef"><b>Definition</b> constant.h:17</div></div>
<div class="ttc" id="agroup___n_o_z__vector_html_ga145b6f75c1c66f24c8c4ab97f9564a55"><div class="ttname"><a href="group___n_o_z__vector.html#ga145b6f75c1c66f24c8c4ab97f9564a55">NozVecLength</a></div><div class="ttdeci">float NozVecLength(const NozVector2 &amp;v1)</div><div class="ttdoc">Vector Length: ||v1||.</div><div class="ttdef"><b>Definition</b> vector.h:472</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga6063c2c114e7a465b965556590be3164"><div class="ttname"><a href="group___pz_phase_api.html#ga6063c2c114e7a465b965556590be3164">PresenZ::Phase::v4_0::PzGetAOVInfo</a></div><div class="ttdeci">void PzGetAOVInfo(const int32_t &amp;index, std::string &amp;name, AOVType &amp;type)</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga800b20ae7724b268fd3d82134ea96a46"><div class="ttname"><a href="group___pz_phase_api.html#ga800b20ae7724b268fd3d82134ea96a46">PresenZ::Phase::v4_0::PzRenderPhaseGetNumAov</a></div><div class="ttdeci">size_t PzRenderPhaseGetNumAov()</div><div class="ttdoc">Function to get the number of AOV registered to presenZ.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gaf907558c917636b2f0cad787e5b1dda3"><div class="ttname"><a href="group___pz_phase_api.html#gaf907558c917636b2f0cad787e5b1dda3">PresenZ::Phase::v4_0::PzGetZOVWorldPosition</a></div><div class="ttdeci">NozPoint PzGetZOVWorldPosition()</div><div class="ttdoc">Get ZOV world position.</div></div>
<div class="ttc" id="agroup___render_sample_html_ga1363397bd1f19ac5231055543875c744"><div class="ttname"><a href="group___render_sample.html#ga1363397bd1f19ac5231055543875c744">PresenZ::RenderSample::v4_0::PzSetSampleColor</a></div><div class="ttdeci">void PzSetSampleColor(PzRenderSample &amp;sample, const NozRGBA &amp;rgba)</div><div class="ttdoc">Set the default (left eye) color for this sample.</div></div>
<div class="ttc" id="agroup___render_sample_html_ga4c8496dbbcbc7811f2ba58fd44f6661e"><div class="ttname"><a href="group___render_sample.html#ga4c8496dbbcbc7811f2ba58fd44f6661e">PresenZ::RenderSample::v4_0::PzSetSamplesCount</a></div><div class="ttdeci">void PzSetSamplesCount(const int &amp;pixelX, const int &amp;pixelY, const int &amp;count)</div><div class="ttdoc">Set the number of samples launched for a pixel.</div></div>
<div class="ttc" id="agroup___render_sample_html_ga4e2a3666a24149f5027023528ce21a5a"><div class="ttname"><a href="group___render_sample.html#ga4e2a3666a24149f5027023528ce21a5a">PresenZ::RenderSample::v4_0::PzSetSamplePosXY</a></div><div class="ttdeci">void PzSetSamplePosXY(PzRenderSample &amp;sample, const double &amp;xScreen, const double &amp;yScreen)</div><div class="ttdoc">Set the X/Y inside the pixel, this will set the inPixelPosXY by keeping only the decimals.</div></div>
<div class="ttc" id="agroup___render_sample_html_ga6b536a25d0cd571d05f62ba75c305f05"><div class="ttname"><a href="group___render_sample.html#ga6b536a25d0cd571d05f62ba75c305f05">PresenZ::RenderSample::v4_0::PzSetSampleNormal</a></div><div class="ttdeci">void PzSetSampleNormal(PzRenderSample &amp;sample, const NozVector &amp;normal)</div><div class="ttdoc">Set the sample normal.</div></div>
<div class="ttc" id="agroup___render_sample_html_ga80538f930119a325ca534c896e490597"><div class="ttname"><a href="group___render_sample.html#ga80538f930119a325ca534c896e490597">PresenZ::RenderSample::v4_0::PzAddVelocitySampleAov</a></div><div class="ttdeci">void PzAddVelocitySampleAov(PzRenderSample &amp;sample, const NozVector &amp;velocity)</div><div class="ttdoc">Will tag the current sample with a specific velocity so between-frame interpolation is more accurate.</div></div>
<div class="ttc" id="agroup___render_sample_html_ga8935efb907edc5afd9ce511b72182819"><div class="ttname"><a href="group___render_sample.html#ga8935efb907edc5afd9ce511b72182819">PresenZ::RenderSample::v4_0::PzSetSampleZ</a></div><div class="ttdeci">void PzSetSampleZ(PzRenderSample &amp;sample, const double z)</div><div class="ttdoc">Set how far from the ray origin you are.</div></div>
<div class="ttc" id="agroup___render_sample_html_ga9a7159997ae0ca7d7656d7fe180fd190"><div class="ttname"><a href="group___render_sample.html#ga9a7159997ae0ca7d7656d7fe180fd190">PresenZ::RenderSample::v4_0::PzAddSampleAov</a></div><div class="ttdeci">void PzAddSampleAov(PzRenderSample &amp;sample, const void *data, const int &amp;iAlias)</div><div class="ttdoc">Add your own custom type of data.</div></div>
<div class="ttc" id="agroup___render_sample_html_gab1f9d16753fb9da84735c3138032ef97"><div class="ttname"><a href="group___render_sample.html#gab1f9d16753fb9da84735c3138032ef97">PresenZ::RenderSample::v4_0::PzAddGlassSampleAov</a></div><div class="ttdeci">void PzAddGlassSampleAov(PzRenderSample &amp;sample, const int &amp;glass)</div><div class="ttdoc">Will tag the current sample as a glass that need to be transparent.</div></div>
<div class="ttc" id="agroup___render_sample_html_gae1426a7ec51607b5dc5d9c2b73ed4347"><div class="ttname"><a href="group___render_sample.html#gae1426a7ec51607b5dc5d9c2b73ed4347">PresenZ::RenderSample::v4_0::PzSetSamplePosition</a></div><div class="ttdeci">void PzSetSamplePosition(PzRenderSample &amp;sample, const NozPoint &amp;position)</div><div class="ttdoc">Set the sample position.</div></div>
<div class="ttc" id="agroup___render_sample_html_gae715ceee4ccb12e2ac960c8de76b40a8"><div class="ttname"><a href="group___render_sample.html#gae715ceee4ccb12e2ac960c8de76b40a8">PresenZ::RenderSample::v4_0::PzFilterRenderSample</a></div><div class="ttdeci">void PzFilterRenderSample(const size_t &amp;x, const size_t &amp;y, std::vector&lt; PzRenderSample &gt; &amp;renderSamples, std::vector&lt; PzFilteredSample &gt; &amp;pixelXY_Results)</div><div class="ttdoc">Filter the current RenderSample data.</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_bin_i_o_html"><div class="ttname"><a href="namespace_presen_z_1_1_bin_i_o.html">PresenZ::BinIO</a></div><div class="ttdef"><b>Definition</b> PzBucketApi.h:15</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_cryptomatte_1_1v4__0_html_a3404d8b67629d5291a6656c413729eaa"><div class="ttname"><a href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#a3404d8b67629d5291a6656c413729eaa">PresenZ::Cryptomatte::v4_0::PzGetActiveCryptomatte</a></div><div class="ttdeci">void PzGetActiveCryptomatte(bool &amp;objects, bool &amp;materials, bool &amp;assets)</div><div class="ttdoc">Function to get the active Cryptomattes AOV in presenZ.</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_cryptomatte_1_1v4__0_html_a8affba5e09de3d0672d96739f57e0961"><div class="ttname"><a href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#a8affba5e09de3d0672d96739f57e0961">PresenZ::Cryptomatte::v4_0::PzSetSampleCrypto</a></div><div class="ttdeci">void PzSetSampleCrypto(PresenZ::RenderSample::PzRenderSample &amp;sample, const cryptoType &amp;type, const float &amp;value)</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_cryptomatte_html"><div class="ttname"><a href="namespace_presen_z_1_1_cryptomatte.html">PresenZ::Cryptomatte</a></div><div class="ttdef"><b>Definition</b> PzCryptomatteApi.h:8</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_phase_1_1_p_r_e_s_e_n_z___v_e_r_s_i_o_n___n_s_html_add16db84a471b163119fa85bfa9df0fdae75845ff0980839032f4a78a0d42753c"><div class="ttname"><a href="namespace_presen_z_1_1_phase_1_1_p_r_e_s_e_n_z___v_e_r_s_i_o_n___n_s.html#add16db84a471b163119fa85bfa9df0fdae75845ff0980839032f4a78a0d42753c">PresenZ::Phase::PRESENZ_VERSION_NS::RGBA</a></div><div class="ttdeci">@ RGBA</div><div class="ttdoc">RGBA.</div><div class="ttdef"><b>Definition</b> PzConstants.h:147</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_phase_html"><div class="ttname"><a href="namespace_presen_z_1_1_phase.html">PresenZ::Phase</a></div><div class="ttdef"><b>Definition</b> PzConstants.h:53</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_render_sample_html"><div class="ttname"><a href="namespace_presen_z_1_1_render_sample.html">PresenZ::RenderSample</a></div><div class="ttdef"><b>Definition</b> PzRenderSampleApi.h:18</div></div>
<div class="ttc" id="astruct_noz_point_html"><div class="ttname"><a href="struct_noz_point.html">NozPoint</a></div><div class="ttdoc">3D point (single precision)</div><div class="ttdef"><b>Definition</b> vector.h:25</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html">PresenZ::DetectSample::v4_0::SaveDataStructure</a></div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:58</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_a10783e24924a7160fed76c3a48530298"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a10783e24924a7160fed76c3a48530298">PresenZ::DetectSample::v4_0::SaveDataStructure::minZ</a></div><div class="ttdeci">float minZ</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:70</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_a1a4f15d1f73a8a725318a64a4303630c"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a1a4f15d1f73a8a725318a64a4303630c">PresenZ::DetectSample::v4_0::SaveDataStructure::maxZ</a></div><div class="ttdeci">float maxZ</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:71</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_a1cdedf2e87044c140c64183314f9d522"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a1cdedf2e87044c140c64183314f9d522">PresenZ::DetectSample::v4_0::SaveDataStructure::bestCam</a></div><div class="ttdeci">uint8_t bestCam</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:73</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_a2228d652eb39da15933e2b9345893951"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a2228d652eb39da15933e2b9345893951">PresenZ::DetectSample::v4_0::SaveDataStructure::expSize</a></div><div class="ttdeci">uint8_t expSize</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:67</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_a75f8ddf992db0cfc3cd1aa024086b6f3"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a75f8ddf992db0cfc3cd1aa024086b6f3">PresenZ::DetectSample::v4_0::SaveDataStructure::pixelX</a></div><div class="ttdeci">int pixelX</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:74</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_a8a33ba6ff4f3da7799e33a2827f9d297"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a8a33ba6ff4f3da7799e33a2827f9d297">PresenZ::DetectSample::v4_0::SaveDataStructure::isChaotic</a></div><div class="ttdeci">bool isChaotic</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:65</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_a9267c6b3eae71d461769e6ea6a8fe2c0"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a9267c6b3eae71d461769e6ea6a8fe2c0">PresenZ::DetectSample::v4_0::SaveDataStructure::camera</a></div><div class="ttdeci">uint8_t camera</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:61</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_a97876727134fadec3c9fc1dd3e6fbaff"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#a97876727134fadec3c9fc1dd3e6fbaff">PresenZ::DetectSample::v4_0::SaveDataStructure::isEstimated</a></div><div class="ttdeci">bool isEstimated</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:62</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_aaa0423628e784003c3f5754ca1e56e70"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#aaa0423628e784003c3f5754ca1e56e70">PresenZ::DetectSample::v4_0::SaveDataStructure::pixelY</a></div><div class="ttdeci">int pixelY</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:75</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_ac132759c29737e9daf6c071e2d49db6b"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#ac132759c29737e9daf6c071e2d49db6b">PresenZ::DetectSample::v4_0::SaveDataStructure::transpType</a></div><div class="ttdeci">uint8_t transpType</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:68</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_ac66c2e837c24a5cd822b7b42ed61558d"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#ac66c2e837c24a5cd822b7b42ed61558d">PresenZ::DetectSample::v4_0::SaveDataStructure::isDraft</a></div><div class="ttdeci">bool isDraft</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:64</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_ac66daeca3e15743ee63ec77b85de6759"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#ac66daeca3e15743ee63ec77b85de6759">PresenZ::DetectSample::v4_0::SaveDataStructure::isFrustrum</a></div><div class="ttdeci">bool isFrustrum</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:66</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_ad50b77be6452fcd203fa25771dd4f69e"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#ad50b77be6452fcd203fa25771dd4f69e">PresenZ::DetectSample::v4_0::SaveDataStructure::isHair</a></div><div class="ttdeci">bool isHair</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:63</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_af73583b1e980b0aa03f9884812e9fd4d"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#af73583b1e980b0aa03f9884812e9fd4d">PresenZ::DetectSample::v4_0::SaveDataStructure::z</a></div><div class="ttdeci">float z</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:69</div></div>
<div class="ttc" id="astruct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure_html_afdddd54644ca7c73b3d22f7b2d206ca8"><div class="ttname"><a href="struct_presen_z_1_1_detect_sample_1_1v4__0_1_1_save_data_structure.html#afdddd54644ca7c73b3d22f7b2d206ca8">PresenZ::DetectSample::v4_0::SaveDataStructure::normal</a></div><div class="ttdeci">NozPoint normal</div><div class="ttdef"><b>Definition</b> PzDetectSampleApi.h:72</div></div>
<div class="ttc" id="astruct_presen_z_1_1_render_sample_1_1v4__0_1_1_pz_render_sample_html"><div class="ttname"><a href="struct_presen_z_1_1_render_sample_1_1v4__0_1_1_pz_render_sample.html">PresenZ::RenderSample::v4_0::PzRenderSample</a></div><div class="ttdoc">Data containing all relevant information regarding a shading phase sample.</div><div class="ttdef"><b>Definition</b> PzRenderSampleApi.h:134</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md57"></a>
10.5 Driver</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ai.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;arnoldWrapper.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;presenz_global_parameters.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_bucket_api_8h.html">API/PzBucketApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_render_sample_api_8h.html">API/PzRenderSampleApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_detect_sample_api_8h.html">API/PzDetectSampleApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_phase_api_8h.html">API/PzPhaseApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_camera_api_8h.html">API/PzCameraApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_pz_cryptomatte_api_8h.html">API/PzCryptomatteApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_presen_z_1_1_phase.html">PresenZ::Phase</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_presen_z_1_1_bin_i_o.html">PresenZ::BinIO</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_presen_z_1_1_render_sample.html">PresenZ::RenderSample</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_presen_z_1_1_camera.html">PresenZ::Camera</a>;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">inline</span> <span class="keywordtype">size_t</span> getNumShaders(AtArray *shaders) { <span class="keywordflow">return</span> AiArrayGetNumElements(shaders);}</div>
<div class="line"><span class="keyword">inline</span> <span class="keywordtype">void</span> initializeDriver(AtNode* node) {AiDriverInitialize(node, <span class="keyword">true</span>);}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> saveCurrentAOV(AtNode* node) {</div>
<div class="line">    DriverData* data = (DriverData*)AiNodeGetLocalData(node);</div>
<div class="line">    AtUniverse* universe = AiNodeGetUniverse(node);</div>
<div class="line">    AtArray* outputs = AiNodeGetArray(AiUniverseGetOptions(universe), outputsAtStr);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> numElements = AiArrayGetNumElements(outputs);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (data-&gt;aovDeclaration != <span class="keyword">nullptr</span>) {</div>
<div class="line">        <span class="keyword">delete</span>[] data-&gt;aovDeclaration;</div>
<div class="line">        data-&gt;aovDeclaration = <span class="keyword">nullptr</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    data-&gt;numElements = numElements;</div>
<div class="line">    data-&gt;aovDeclaration = <span class="keyword">new</span> AtString[numElements];</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numElements; i++) {</div>
<div class="line">        data-&gt;aovDeclaration[i] = AiArrayGetStr(outputs, i);</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> restoreAOVs(AtNode* node) {</div>
<div class="line"> </div>
<div class="line">    DriverData* data = (DriverData*)AiNodeGetLocalData(node);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (data-&gt;aovDeclaration == NULL)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    AtUniverse* universe = AiNodeGetUniverse(node);</div>
<div class="line">    AtArray* outputs = AiNodeGetArray(AiUniverseGetOptions(universe), outputsAtStr);</div>
<div class="line"> </div>
<div class="line">    AiArrayResize(outputs, data-&gt;numElements, 1);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; data-&gt;numElements; i++) {</div>
<div class="line">        AiArraySetStr(outputs, i, data-&gt;aovDeclaration[i]);</div>
<div class="line">    }</div>
<div class="line">    data-&gt;numElements = 0;</div>
<div class="line">    <span class="keyword">delete</span>[] data-&gt;aovDeclaration;</div>
<div class="line">    data-&gt;aovDeclaration = <span class="keyword">nullptr</span>;</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> registerAOVsDetect(AtNode* node)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!(AiNodeGetInt(node, passStr) == Detect || AiNodeGetInt(node, passStr) == Detect_Reflection))</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    std::vector &lt;std::string&gt; aovDeclaration;</div>
<div class="line">    {</div>
<div class="line">        AtNode* filter = getPresenZFilter(node);</div>
<div class="line">        AtUniverse* universe = AiNodeGetUniverse(node);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Detect AOV</span></div>
<div class="line">       </div>
<div class="line">        std::vector &lt;std::string&gt; aovDeclaration;</div>
<div class="line"> </div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_camera INT&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_estimated BOOL&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_hair BOOL&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_draft BOOL&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_chaotic BOOL&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_frustrum BOOL&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_expSize INT&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_transpType INT&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_Z FLOAT&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_minZ FLOAT&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_maxZ FLOAT&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_normal VECTOR&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_bestCam INT&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_pixelX INT&quot;</span>);</div>
<div class="line">        aovDeclaration.push_back(<span class="stringliteral">&quot;detect_pixelY INT&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        AtArray* outputs = AiNodeGetArray(AiUniverseGetOptions(universe), outputsAtStr);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Saving current AOVs</span></div>
<div class="line">        saveCurrentAOV(node); </div>
<div class="line">        AiArrayResize(outputs, aovDeclaration.size(), 1);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; aovDeclaration.size(); i++) {</div>
<div class="line">            std::string aov = aovDeclaration[i] + <span class="stringliteral">&quot; &quot;</span> + AiNodeGetName(filter) + <span class="stringliteral">&quot; &quot;</span> + AiNodeGetName(node);</div>
<div class="line">            AiArraySetStr(outputs, i, aov.c_str());</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> sanitizeOutput(std::string&amp; line, std::string declaration) {</div>
<div class="line">    std::vector&lt;std::string&gt; parts;</div>
<div class="line">    std::istringstream iss(line);</div>
<div class="line">    std::string part;</div>
<div class="line">    <span class="keywordflow">while</span> (iss &gt;&gt; part) {</div>
<div class="line">        parts.push_back(part);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parts.size() &lt; 4) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Ensure there are enough parts to avoid out-of-bounds access</span></div>
<div class="line"> </div>
<div class="line">    std::string aov = parts[0];</div>
<div class="line">    std::string aovtype = parts[1];</div>
<div class="line"> </div>
<div class="line">    line = aov + <span class="stringliteral">&quot; &quot;</span> + aovtype + declaration;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Register to Arnold what are the extra datas per pixel that we need (for deep_reflection or motion vectors).</span></div>
<div class="line"><span class="keywordtype">void</span> registerAOVs(AtNode *node, <span class="keywordtype">bool</span> compute_motion_vector)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// No need of AOV for detection phase.</span></div>
<div class="line">    <span class="keywordflow">if</span> (!(AiNodeGetInt(node, passStr) == Render || AiNodeGetInt(node, passStr) == Render_Reflection))</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    DriverData* data = (DriverData*)AiNodeGetLocalData(node);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    std::vector &lt;std::string&gt; aovDeclaration;</div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        AtNode* filter = getPresenZFilter(node);</div>
<div class="line">        AtUniverse* universe = AiNodeGetUniverse(node);</div>
<div class="line"> </div>
<div class="line">        std::string filterName = AiNodeGetName(filter);</div>
<div class="line">        std::string driverName = AiNodeGetName(node);</div>
<div class="line">        std::string pzDeclaration = <span class="stringliteral">&quot; &quot;</span> + filterName + <span class="stringliteral">&quot; &quot;</span> + driverName;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Default AOV</span></div>
<div class="line">        {</div>
<div class="line">            std::string RGBA_aov_str(<span class="stringliteral">&quot;RGBA RGBA&quot;</span>);</div>
<div class="line">            std::string Z_aov_str(<span class="stringliteral">&quot;Z FLOAT&quot;</span>);</div>
<div class="line">            std::string P_aov_str(<span class="stringliteral">&quot;P VECTOR&quot;</span>);</div>
<div class="line">            std::string N_aov_str(<span class="stringliteral">&quot;prz_geometricnormal VECTOR&quot;</span>);</div>
<div class="line">            std::string prz_transp_aov_str(<span class="stringliteral">&quot;prz_transp BOOL&quot;</span>);</div>
<div class="line">            std::string transmission_albedo_aov_str(<span class="stringliteral">&quot;transmission_albedo RGB&quot;</span>);</div>
<div class="line">            std::string glass_aov_aov_str(<span class="stringliteral">&quot;glass_aov RGB&quot;</span>);</div>
<div class="line">            std::string ray_dir_aov_str(<span class="stringliteral">&quot;ray_dir VECTOR&quot;</span>);</div>
<div class="line">            std::string ray_orig_aov_str(<span class="stringliteral">&quot;ray_orig VECTOR&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (PresenZ_data_struct::pass == PresenZ::Phase::Render_Reflection)</div>
<div class="line">            {</div>
<div class="line">                Z_aov_str = <span class="stringliteral">&quot;Z_Refl FLOAT&quot;</span>;</div>
<div class="line">                P_aov_str = <span class="stringliteral">&quot;P_Refl VECTOR&quot;</span>;</div>
<div class="line">                RGBA_aov_str = <span class="stringliteral">&quot;RGBA_Refl RGBA&quot;</span>;</div>
<div class="line"> </div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            RGBA_aov_str = RGBA_aov_str + pzDeclaration;</div>
<div class="line">            Z_aov_str = Z_aov_str + pzDeclaration;</div>
<div class="line">            P_aov_str = P_aov_str + pzDeclaration;</div>
<div class="line">            N_aov_str = N_aov_str + pzDeclaration;</div>
<div class="line">            prz_transp_aov_str = prz_transp_aov_str + pzDeclaration;</div>
<div class="line">            transmission_albedo_aov_str = transmission_albedo_aov_str + pzDeclaration;</div>
<div class="line">            glass_aov_aov_str = glass_aov_aov_str + pzDeclaration;</div>
<div class="line">            ray_dir_aov_str = ray_dir_aov_str + pzDeclaration;</div>
<div class="line">            ray_orig_aov_str = ray_orig_aov_str + pzDeclaration;</div>
<div class="line"> </div>
<div class="line">            aovDeclaration.push_back(RGBA_aov_str);</div>
<div class="line">            aovDeclaration.push_back(Z_aov_str);</div>
<div class="line">            aovDeclaration.push_back(P_aov_str);</div>
<div class="line">            aovDeclaration.push_back(N_aov_str);</div>
<div class="line">            aovDeclaration.push_back(prz_transp_aov_str);</div>
<div class="line">            aovDeclaration.push_back(transmission_albedo_aov_str);</div>
<div class="line">            aovDeclaration.push_back(glass_aov_aov_str);</div>
<div class="line">            aovDeclaration.push_back(ray_dir_aov_str);</div>
<div class="line">            aovDeclaration.push_back(ray_orig_aov_str);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (compute_motion_vector)</div>
<div class="line">        {</div>
<div class="line">            std::string mvAov = std::string(velocityAtStr.c_str()) + <span class="stringliteral">&quot; VECTOR&quot;</span> + pzDeclaration;</div>
<div class="line">            aovDeclaration.push_back(mvAov);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        AtArray *outputs = AiNodeGetArray(AiUniverseGetOptions(universe), outputsAtStr);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Saving current AOVs</span></div>
<div class="line">        <span class="keywordtype">int</span> numElements = AiArrayGetNumElements(outputs);</div>
<div class="line">        saveCurrentAOV(node);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; AiArrayGetNumElements(outputs); i++)</div>
<div class="line">        {</div>
<div class="line">            AtString lineOutput_atStr = AiArrayGetStr(outputs, i);</div>
<div class="line">            std::string lineOutput(lineOutput_atStr.c_str());</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(sanitizeOutput(lineOutput, pzDeclaration)) {</div>
<div class="line">           </div>
<div class="line">                <span class="keywordflow">if</span> (std::find(aovDeclaration.begin(), aovDeclaration.end(), std::string(lineOutput.c_str())) == aovDeclaration.end())</div>
<div class="line">                    aovDeclaration.push_back(lineOutput.c_str());</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        AiArrayResize(outputs, aovDeclaration.size(), 1);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">int</span> aliasIdx = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; aovDeclaration.size(); i++)</div>
<div class="line">        {</div>
<div class="line">            AiArraySetStr(outputs, i, aovDeclaration[i].c_str());</div>
<div class="line"> </div>
<div class="line">            std::istringstream iss(aovDeclaration[i]);</div>
<div class="line">            std::string first, second;</div>
<div class="line">            iss &gt;&gt; first &gt;&gt; second;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (std::find(standard_AOVs.begin(), standard_AOVs.end(), AtString(first.c_str())) == standard_AOVs.end())</div>
<div class="line">            {</div>
<div class="line">                uint8_t type = convertNameTypeToType(second);</div>
<div class="line">                <span class="keywordflow">switch</span> (type)</div>
<div class="line">                {</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_INT:</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_USHORT:</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_UINT: <a class="code hl_function" href="group___pz_phase_api.html#ga54617be279c0e9d7e6387abb143dbecb">PzRenderPhaseRegisterAov</a>(aliasIdx, first.c_str(), PresenZ::Phase::AOVType::INT); <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_BYTE:</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_BOOLEAN: <a class="code hl_function" href="group___pz_phase_api.html#ga54617be279c0e9d7e6387abb143dbecb">PzRenderPhaseRegisterAov</a>(aliasIdx, first.c_str(), PresenZ::Phase::AOVType::BOOL); <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_FLOAT:</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_HALF: <a class="code hl_function" href="group___pz_phase_api.html#ga54617be279c0e9d7e6387abb143dbecb">PzRenderPhaseRegisterAov</a>(aliasIdx, first.c_str(), PresenZ::Phase::AOVType::FLOAT); <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_RGB: <a class="code hl_function" href="group___pz_phase_api.html#ga54617be279c0e9d7e6387abb143dbecb">PzRenderPhaseRegisterAov</a>(aliasIdx, first.c_str(), PresenZ::Phase::AOVType::RGB); <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_RGBA: <a class="code hl_function" href="group___pz_phase_api.html#ga54617be279c0e9d7e6387abb143dbecb">PzRenderPhaseRegisterAov</a>(aliasIdx, first.c_str(), PresenZ::Phase::AOVType::RGBA); <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_VECTOR2: <a class="code hl_function" href="group___pz_phase_api.html#ga54617be279c0e9d7e6387abb143dbecb">PzRenderPhaseRegisterAov</a>(aliasIdx, first.c_str(), PresenZ::Phase::AOVType::VEC2); <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> AI_TYPE_VECTOR: <a class="code hl_function" href="group___pz_phase_api.html#ga54617be279c0e9d7e6387abb143dbecb">PzRenderPhaseRegisterAov</a>(aliasIdx, first.c_str(), PresenZ::Phase::AOVType::VEC); <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                ++aliasIdx;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <a class="code hl_define" href="group___pz_app_logger.html#gad79dc53c351eeff13f901542c29f6e57">PZ_DEBUG</a>(<span class="stringliteral">&quot;Registered %i additionnal AOVs&quot;</span>, aliasIdx);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> createCryptomatteOutput(AtNode* node, <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; do_crypto_object, <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; do_crypto_material, <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; do_crypto_asset) {</div>
<div class="line">    </div>
<div class="line">    AtNode* filter = getPresenZFilter(node);</div>
<div class="line">    AtUniverse* universe = AiNodeGetUniverse(node);</div>
<div class="line"> </div>
<div class="line">    std::string filterName = AiNodeGetName(filter);</div>
<div class="line">    std::string driverName = AiNodeGetName(node);</div>
<div class="line">    std::string pzDeclaration = <span class="stringliteral">&quot; &quot;</span> + filterName + <span class="stringliteral">&quot; &quot;</span> + driverName;</div>
<div class="line"> </div>
<div class="line">    AtArray* outputs = AiNodeGetArray(AiUniverseGetOptions(universe), outputsAtStr);</div>
<div class="line">    <span class="keyword">const</span> uint32_t prev_output_num = AiArrayGetNumElements(outputs);</div>
<div class="line"> </div>
<div class="line">    std::vector&lt;std::string&gt; output_set;</div>
<div class="line">    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; prev_output_num; i++)</div>
<div class="line">        output_set.push_back(std::string(AiArrayGetStr(outputs, i)));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(do_crypto_object)</div>
<div class="line">        output_set.push_back(std::string(<span class="stringliteral">&quot;crypto_object FLOAT &quot;</span>) + pzDeclaration);</div>
<div class="line">    <span class="keywordflow">if</span>(do_crypto_material)</div>
<div class="line">        output_set.push_back(std::string(<span class="stringliteral">&quot;crypto_material FLOAT &quot;</span>) + pzDeclaration);</div>
<div class="line">    <span class="keywordflow">if</span>(do_crypto_asset)</div>
<div class="line">        output_set.push_back(std::string(<span class="stringliteral">&quot;crypto_asset FLOAT &quot;</span>) + pzDeclaration);</div>
<div class="line"> </div>
<div class="line">    AiArrayResize(outputs, output_set.size(), 1);</div>
<div class="line">    <span class="keywordtype">int</span> i = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; elem : output_set) {</div>
<div class="line">        AiArraySetStr(outputs, i, elem.c_str());</div>
<div class="line">        ++i;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Invoke all the PresenZ parameters that are related to the Camera</span></div>
<div class="line"><span class="keywordtype">void</span> initPresenZCameraParameters(<span class="keyword">const</span> AtNode* pzCamera, <span class="keyword">const</span> <span class="keywordtype">int</span> renderTargetResX, <span class="keyword">const</span> <span class="keywordtype">int</span> renderTargetResY, <span class="keyword">const</span> <span class="keywordtype">float</span> ipd)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga6cddcd34414f7cfd6d8c870e11dcfdac">PzSetOutputResolution</a>(renderTargetResX, renderTargetResY);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> renderEye = AiNodeGetInt(pzCamera, renderingEyeStr);</div>
<div class="line">    PresenZ::Phase::Eye eye = PresenZ::Phase::Eye::RC_LeftAndRight;</div>
<div class="line">    <span class="keywordflow">if</span> (renderEye == 0) { eye = PresenZ::Phase::Eye::RC_Left; }</div>
<div class="line">    <span class="keywordflow">if</span> (renderEye == 1) { eye = PresenZ::Phase::Eye::RC_Right; }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga949129ceea6602d8e188e8edde8c9596">PzSetDeepReflection</a>(eye, ipd);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gabfdb2cfc6e11bc80cc3d8f27bff0768e">PzSetDistanceToGround</a>(AiNodeGetFlt(pzCamera, <span class="stringliteral">&quot;distance_to_ground&quot;</span>));</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga1aca5cb52d6cc925c72a658a8cae0161">PzSetSpecularPointOffset</a>(NozPointFromAiPoint(AiNodeGetVec(pzCamera, <span class="stringliteral">&quot;specular_point_offset&quot;</span>)));</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> AtVector viewscale = AiNodeGetVec(pzCamera, <span class="stringliteral">&quot;view_scale&quot;</span>);</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga9e5a704692330cca20bc7cc81219228e">PzSetZovScaling</a>(viewscale.x, viewscale.y, viewscale.z);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gaae62eec6ec456bd4c638f1c0b4bf470f">PzSetZovOffset</a>(AiNodeGetInt(pzCamera, AtString(<span class="stringliteral">&quot;multibox_offset_right&quot;</span>)), AiNodeGetInt(pzCamera, AtString(<span class="stringliteral">&quot;multibox_offset_top&quot;</span>)), AiNodeGetInt(pzCamera, AtString(<span class="stringliteral">&quot;multibox_offset_back&quot;</span>)));</div>
<div class="line"> </div>
<div class="line">    AtMatrix AtCamToWorldMat4;</div>
<div class="line">    AiCameraToWorldMatrix(pzCamera, 0.5, AtCamToWorldMat4);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="matrix_8h.html#a15eb5c4da255c65c60623dc95ca45bc1">NozMatrix</a> worldToCam;</div>
<div class="line">    AtMatrixToNozMatrix(AtCamToWorldMat4, worldToCam);</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gab7d28db69c251d7d1761412440d41068">PzSetCameraToWorldMatrix</a>(worldToCam);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga536fd47146cb18c507f803356f5df1d9">PzSetClippingSphere</a>(AiNodeGetBool(pzCamera, AtString(<span class="stringliteral">&quot;clipping_enable&quot;</span>)),</div>
<div class="line">        <a class="code hl_typedef" href="group___n_o_z__vector.html#ga347d85f3e636cf273a47949aa0613a8f">NozVector</a>(AiNodeGetVec(pzCamera, <span class="stringliteral">&quot;clipping_position&quot;</span>).x, AiNodeGetVec(pzCamera, <span class="stringliteral">&quot;clipping_position&quot;</span>).y, AiNodeGetVec(pzCamera, <span class="stringliteral">&quot;clipping_position&quot;</span>).z),</div>
<div class="line">        AiNodeGetFlt(pzCamera, <span class="stringliteral">&quot;clipping_radius&quot;</span>), !AiNodeGetBool(pzCamera, <span class="stringliteral">&quot;clipping_outside&quot;</span>));</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga770112d6d9328a4cc973dec788ec4c65">PzSetRenderInsideBox</a>(AiNodeGetInt(pzCamera, AtString(<span class="stringliteral">&quot;render_inside_zov&quot;</span>)));</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga0e256374d02c493cea64e1413a0da7f1">PzSetFroxtrum</a>(AiNodeGetBool(pzCamera, AtString(<span class="stringliteral">&quot;enable_froxtrum&quot;</span>)));</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gab3f9a2ad1e2b489787fb177116e3e248">PzSetFroxtrumDepth</a>(AiNodeGetInt(pzCamera, AtString(<span class="stringliteral">&quot;froxtrum_depth&quot;</span>))+5);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> AtString windowShapesFile = AiNodeGetStr(pzCamera, AtString(<span class="stringliteral">&quot;window_shapes_file&quot;</span>));</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> windowShapeIndex = AiNodeGetInt(pzCamera, AtString(<span class="stringliteral">&quot;window_shape_index&quot;</span>));</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> minDistToScreen = AiNodeGetFlt(pzCamera, AtString(<span class="stringliteral">&quot;min_dist_to_screen&quot;</span>));</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (windowShapesFile.length() != 0 ){</div>
<div class="line">        <a class="code hl_function" href="group___pz_phase_api.html#ga79970a419cce7b5c709765413c5d8fb2">PzSetWindowShapesFile</a>(windowShapesFile.c_str(), windowShapeIndex);</div>
<div class="line">        <a class="code hl_function" href="group___pz_phase_api.html#gae379dd62e45b425b22c82f70455acfb8">PzSetDetectionMinimumDistance</a>(minDistToScreen);</div>
<div class="line">        <a class="code hl_define" href="group___pz_app_logger.html#gaf8ab3f1606906a93b3081de7f0cb7be1">PZ_INFO</a>(<span class="stringliteral">&quot;[PresenZ] Set the minimum distance of detection to %f cm for window shape rendering\n&quot;</span>, minDistToScreen);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Forward all the parameters from Arnold to PresenZ.</span></div>
<div class="line"><span class="keywordtype">bool</span> initPresenZ(AtNode *node)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> AtUniverse* universe = AiNodeGetUniverse(node);</div>
<div class="line">    <span class="keyword">const</span> AtNode* pzCamera = AiUniverseGetCamera(universe);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (AiNodeIs(pzCamera, PresenzCameraName) == <span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_define" href="group___pz_app_logger.html#ga57e4c432a80f1ffc8de1a41a42ac07d0">PZ_WARNING</a>(<span class="stringliteral">&quot;[PresenZ] Could not find the PresenZ camera.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> pass = AiNodeGetInt(node, passStr);</div>
<div class="line">    PresenZ_data_struct::pass = pass;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> renderEye = AiNodeGetInt(pzCamera, renderingEyeStr);</div>
<div class="line">    PresenZ_data_struct::motion_vector = (renderEye == 0 &amp;&amp; pass == <a class="code hl_enumvalue" href="namespace_presen_z_1_1_phase_1_1_p_r_e_s_e_n_z___v_e_r_s_i_o_n___n_s.html#ae1c5184dc404edf057ed537bcfddef84ac677a954de25220db675695edacb4f71">Render</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> AtNode *universeOptions = AiRenderSessionGetOptions(AiUniverseGetRenderSession(universe));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pass == Detect || pass == Detect_Reflection)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (AiNodeGetInt(universeOptions, AtString(<span class="stringliteral">&quot;AA_samples&quot;</span>)) != 16)</div>
<div class="line">            <a class="code hl_define" href="group___pz_app_logger.html#gafd8b815a0f76d6b121f44f62d5730ee4">PZ_ERROR</a>(<span class="stringliteral">&quot;Detection phase requires 16 AA_Samples&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (AiNodeGetBool(universeOptions, AtString(<span class="stringliteral">&quot;enable_adaptive_sampling&quot;</span>)) == <span class="keyword">true</span>)</div>
<div class="line">            <a class="code hl_define" href="group___pz_app_logger.html#gafd8b815a0f76d6b121f44f62d5730ee4">PZ_ERROR</a>(<span class="stringliteral">&quot;Detection phase requires adaptative sampling disabled.&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (AiNodeGetFlt(universeOptions, AtString(<span class="stringliteral">&quot;pixel_aspect_ratio&quot;</span>)) != 1.0f)</div>
<div class="line">        <a class="code hl_define" href="group___pz_app_logger.html#gafd8b815a0f76d6b121f44f62d5730ee4">PZ_ERROR</a>(<span class="stringliteral">&quot;Device aspect ratio is not 1.0&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gacfccac9e817766726140bc8ee2ce0ae5">PzInitPhase</a>((Phase)pass, PresenZ::Util::RenderingEngineId::ARNOLD);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga6263ef2247a2089acee99bf2dc4891cd">PzSetRenderTransparencyMode</a>(PresenZ::Phase::TransparencyRenderingType(PresenZ::Phase::TransparencyRenderingType::PRZ_BOTH));</div>
<div class="line">    PresenZ_data_struct::glass_pass_mode = PresenZ::Phase::TransparencyRenderingType::PRZ_BOTH;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pass == Render || pass == Render_Reflection)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_function" href="group___pz_phase_api.html#gab23e6ab698846a91a469c5a3c91fb5d0">PzSetExternalCounter</a>(<span class="keyword">true</span>);</div>
<div class="line">        registerAOVs(node, PresenZ_data_struct::motion_vector);</div>
<div class="line">        </div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pass == Detect || pass == Detect_Reflection)</div>
<div class="line">        registerAOVsDetect(node);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga1a8e8cc90a1fa139011213a3115d80b7">PzSetDetectionSaveguard</a>(8.0, DSG_disabled);</div>
<div class="line">    <span class="comment">// Arnold is thread safe when writing files.</span></div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga16b450c73fbfd9298b91d051b87fa3dd">PzSetOutputThreadSafety</a>(<span class="keyword">false</span>);</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga8492ca6f6962498177d3a8a7f0e33b80">PzSetPresenZBucket</a>(<span class="keyword">false</span>);</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga341b31b72158a06791d4d0e0606c427a">PzSetCameraUpVector</a>(<a class="code hl_typedef" href="group___n_o_z__vector.html#ga347d85f3e636cf273a47949aa0613a8f">NozVector</a>(0.0, 1.0, 0.0));</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gaaf7df9d321491e87bd3fa52ad5c648a0">PzSetDetectFilePath</a>(GetOutputDirectoryDetectFilePath(node).c_str());</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga7759b42bda5736f78e2fecd80601d16e">PzSetOutFilePath</a>(GetOutputDirectoryFilePath(node).c_str());</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga9d205f548fd171cda282661a9c849b3d">PzSetCurrentFrame</a>(AiNodeGetFlt(universeOptions, <span class="stringliteral">&quot;frame&quot;</span>));</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gabeff0a36ad7a222a509922e10096c20f">PzSetDraft</a>(AiNodeGetBool(pzCamera, <span class="stringliteral">&quot;draft_mode&quot;</span>));</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga949129ceea6602d8e188e8edde8c9596">PzSetDeepReflection</a>(Eye::RC_LeftAndRight, AiNodeGetFlt(pzCamera, <span class="stringliteral">&quot;ipd&quot;</span>));</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gaa99ece6cbf6d1f8a07966bb2e17cbcb5">PzSetIdealPointSizeTarget</a>(AiNodeGetFlt(pzCamera, <span class="stringliteral">&quot;ideal_point_size&quot;</span>)); </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga6864add2dc016bfc5a1e1e980f8ce2cc">PzSetRenderScale</a>(AiNodeGetFlt(pzCamera, <span class="stringliteral">&quot;presenz_scene_scale&quot;</span>));</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gaf893250a30d9bea6182a59fbe66dbe9c">PzSetThreadNumber</a>(0);</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> renderTargetResX = AiNodeGetInt(universeOptions, AtString(<span class="stringliteral">&quot;xres&quot;</span>));</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> renderTargetResY = AiNodeGetInt(universeOptions, AtString(<span class="stringliteral">&quot;yres&quot;</span>));</div>
<div class="line"> </div>
<div class="line">    initPresenZCameraParameters(pzCamera, renderTargetResX, renderTargetResY, AiNodeGetFlt(pzCamera, AtString(<span class="stringliteral">&quot;ipd&quot;</span>)));</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gab97cf9e993c581aca0a1eb7401faf784">PzSetMotionVector</a>(PresenZ_data_struct::motion_vector);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga8fb61701ff43f121a84599ecd7443656">PzSetRenderingResolutionParameters</a>(<a class="code hl_function" href="group___pz_phase_api.html#ga61484e9b774b113f22f6148d811ed715">PzComputeRenderingResolutionParameters</a>(renderTargetResX, renderTargetResY));</div>
<div class="line">    <span class="comment">//PzSetRenderingResolutionParameters(PzGetRenderingResolutionParameters());</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (pass == Render || pass == Render_Reflection) {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">bool</span> do_crypto_object = AiNodeGetBool(node, <span class="stringliteral">&quot;cryptomatte_object&quot;</span>);</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">bool</span> do_crypto_material = AiNodeGetBool(node, <span class="stringliteral">&quot;cryptomatte_material&quot;</span>);</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">bool</span> do_crypto_asset = AiNodeGetBool(node, <span class="stringliteral">&quot;cryptomatte_asset&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">int</span> depth_object = AiNodeGetInt(node, <span class="stringliteral">&quot;cryptomatte_object_depth&quot;</span>);</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">int</span> depth_material = AiNodeGetInt(node, <span class="stringliteral">&quot;cryptomatte_material_depth&quot;</span>);</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">int</span> depth_asset = AiNodeGetInt(node, <span class="stringliteral">&quot;cryptomatte_asset_depth&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        PresenZ_data_struct::do_crypto = do_crypto_object || do_crypto_material || do_crypto_asset;</div>
<div class="line">        <a class="code hl_function" href="group___pz_phase_api.html#ga7aca27da0e5e0e838ec13de88a551a6d">PzSetCryptomatte</a>(do_crypto_object, do_crypto_material, do_crypto_asset, depth_object, depth_material, depth_asset);</div>
<div class="line">        createCryptomatteOutput(node, do_crypto_object, do_crypto_material, do_crypto_asset);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">AI_DRIVER_NODE_EXPORT_METHODS(nozPresenZDriverMethods);</div>
<div class="line"> </div>
<div class="line">node_parameters</div>
<div class="line">{</div>
<div class="line">    AiParameterStr(<span class="stringliteral">&quot;filename&quot;</span>, <span class="stringliteral">&quot;presenz.prz&quot;</span>);</div>
<div class="line">    AiParameterStr(<span class="stringliteral">&quot;detect_file&quot;</span>, <span class="stringliteral">&quot;presenz.przDetect&quot;</span>);</div>
<div class="line">    AiMetaDataSetBool(nentry, <span class="stringliteral">&quot;detect_file&quot;</span>, <span class="stringliteral">&quot;maya.hide&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">    AiParameterStr(<span class="stringliteral">&quot;color_space&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);          <span class="comment">// No idea what to do with that, but otherwise MtoA barf about it.</span></div>
<div class="line">    AiParameterInt(<span class="stringliteral">&quot;pass&quot;</span>, 0);</div>
<div class="line">    AiMetaDataSetBool(nentry, <span class="stringliteral">&quot;pass&quot;</span>, <span class="stringliteral">&quot;maya.hide&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">    </div>
<div class="line">    AiParameterBool(<span class="stringliteral">&quot;cryptomatte_object&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">    AiParameterInt(<span class="stringliteral">&quot;cryptomatte_object_depth&quot;</span>, 2);</div>
<div class="line">    AiParameterBool(<span class="stringliteral">&quot;cryptomatte_material&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line">    AiParameterInt(<span class="stringliteral">&quot;cryptomatte_material_depth&quot;</span>, 2);</div>
<div class="line">    AiParameterBool(<span class="stringliteral">&quot;cryptomatte_asset&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line">    AiParameterInt(<span class="stringliteral">&quot;cryptomatte_asset_depth&quot;</span>, 2);</div>
<div class="line"> </div>
<div class="line">    AiParameterInt(<span class="stringliteral">&quot;current_block&quot;</span>, 0);         <span class="comment">// &quot;Current block to render&quot;</span></div>
<div class="line">    AiMetaDataSetBool(nentry, <span class="stringliteral">&quot;current_block&quot;</span>, <span class="stringliteral">&quot;maya.hide&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">    AiMetaDataSetStr(nentry, <span class="stringliteral">&quot;current_block&quot;</span>, <span class="stringliteral">&quot;_synonym&quot;</span>, <span class="stringliteral">&quot;current_Block&quot;</span>);</div>
<div class="line">    </div>
<div class="line"> </div>
<div class="line">    AiMetaDataSetBool(nentry, <span class="stringliteral">&quot;filename&quot;</span>, <span class="stringliteral">&quot;maya.hide&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">    AiMetaDataSetStr(nentry, NULL, <span class="stringliteral">&quot;maya.attr_prefix&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">    AiMetaDataSetStr(nentry, NULL, <span class="stringliteral">&quot;maya.translator&quot;</span>, <span class="stringliteral">&quot;prz&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">driver_extension</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *extensions[] = { <span class="stringliteral">&quot;prz&quot;</span>, <span class="stringliteral">&quot;przDetect&quot;</span>, <span class="stringliteral">&quot;przRender&quot;</span>, NULL };</div>
<div class="line">    <span class="keywordflow">return</span> extensions;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">driver_supports_pixel_type</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> pixel_type == AI_TYPE_POINTER || pixel_type == AI_TYPE_NODE;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">node_initialize</div>
<div class="line">{</div>
<div class="line">    AiDriverInitialize(node, <span class="keyword">true</span>);</div>
<div class="line">    DriverData *data = (DriverData*)AiMalloc(<span class="keyword">sizeof</span>(DriverData));</div>
<div class="line">    data-&gt;aovDeclaration = <span class="keyword">nullptr</span>;</div>
<div class="line">    data-&gt;numElements = 0;</div>
<div class="line">    AiNodeSetLocalData(node, data);</div>
<div class="line">    <a class="code hl_function" href="group___pz_app_logger.html#ga6a60b77d5b79c3fb2d4d98e36433404f">PresenZ::Logger::PzSetDateHeader</a>(<span class="keyword">false</span>);</div>
<div class="line">    <a class="code hl_function" href="group___pz_app_logger.html#ga57c6b13b743e34cf547345173a7b8c4a">PresenZ::Logger::PzSetLogLevelHeader</a>(<span class="keyword">false</span>);</div>
<div class="line">    <a class="code hl_function" href="group___pz_app_logger.html#ga3ec2ec1cb88fd9a6ea0a115731dd753f">PresenZ::Logger::PzSetConsole</a>(<span class="keyword">false</span>);</div>
<div class="line">    <a class="code hl_function" href="group___pz_app_logger.html#ga47dccb155300c8d87d86a3084b5ed685">PresenZ::Logger::PzSetProgressBarType</a>(PresenZ::Logger::PT_vertical);</div>
<div class="line">    <a class="code hl_function" href="group___pz_app_logger.html#gad553edc68869caef27062377dbd1fa3e">PresenZ::Logger::PzSetCallBackLogLevel</a>(PresenZ::Logger::LL_Trace, arnoldLogger, <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span> *<span class="keyword">&gt;</span>(NULL));</div>
<div class="line">    <a class="code hl_function" href="group___pz_app_logger.html#gaa4854eda2f578deaffb33e081b5fc398">PresenZ::Logger::PzSetCallbackCarriageReturnMode</a>(PresenZ::Logger::CR_NoCarriageReturn);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">node_update </div>
<div class="line">{</div>
<div class="line">    DriverData *data = (DriverData*)AiNodeGetLocalData(node);</div>
<div class="line">    data-&gt;m_idValid = initPresenZ(node);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(data-&gt;m_idValid == <span class="keyword">true</span>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">size_t</span> currentBlock = AiNodeGetInt(node, <span class="stringliteral">&quot;current_block&quot;</span>);</div>
<div class="line">        <a class="code hl_function" href="group___pz_phase_api.html#gae9136a619889cbaeddc60ea57063cd96">PzSetCurrentBlockIndex</a>(currentBlock);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <a class="code hl_define" href="group___pz_app_logger.html#gaf8ab3f1606906a93b3081de7f0cb7be1">PZ_INFO</a>(<span class="stringliteral">&quot;[PresenZ] Driver disabled.&quot;</span>)</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">node_finish</div>
<div class="line">{</div>
<div class="line">    DriverData *data = (DriverData*)AiNodeGetLocalData(node);</div>
<div class="line">    AiFree(data);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Callback invoked by Arnold when it is ready to start rendering an image</span></div>
<div class="line">driver_open</div>
<div class="line">{</div>
<div class="line">    DriverData *data = (DriverData*)AiNodeGetLocalData(node);</div>
<div class="line">    <span class="keywordflow">if</span> (data-&gt;m_idValid == <span class="keyword">false</span>)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#gaec78fb6ddee0e55ac6524b5eaa5dcbfb">PzPhaseBegin</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> compileManifests(AtUniverse* universe, <span class="keywordtype">bool</span> do_md_material) {</div>
<div class="line">    AtNodeIterator* shape_iterator = AiUniverseGetNodeIterator(universe, AI_NODE_SHAPE);</div>
<div class="line">    <span class="keywordflow">while</span> (!AiNodeIteratorFinished(shape_iterator)) {</div>
<div class="line">        AtNode* node = AiNodeIteratorGetNext(shape_iterator);</div>
<div class="line">        <span class="keywordflow">if</span> (!node || AiNodeIsDisabled(node))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// skip any list aggregate nodes</span></div>
<div class="line">        <span class="keywordflow">if</span> (AiNodeIs(node, aStr_list_aggregate))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">char</span> nsp_name[<a class="code hl_define" href="_pz_cryptomatte_api_8h.html#a52a3717199fbc540c58210f997fb8bc6">PZ_CRYPTO_MAX_STRING_LENGTH</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">        <span class="keywordtype">char</span> obj_name[<a class="code hl_define" href="_pz_cryptomatte_api_8h.html#a52a3717199fbc540c58210f997fb8bc6">PZ_CRYPTO_MAX_STRING_LENGTH</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#ae631ac509ed7d825f83e331ee413f610">PresenZ::Cryptomatte::PzAddObjectToManifest</a>(AiNodeGetName(node));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (do_md_material) {</div>
<div class="line">            <span class="comment">// Process all shaders from the objects into the manifest.</span></div>
<div class="line">            <span class="comment">// This includes cluster materials.</span></div>
<div class="line">            AtArray* shaders = AiNodeGetArray(node, shaderStr);</div>
<div class="line">            <span class="keywordflow">if</span> (!shaders)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; AiArrayGetNumElements(shaders); i++) {</div>
<div class="line">                AtNode* shader = <span class="keyword">static_cast&lt;</span>AtNode*<span class="keyword">&gt;</span>(AiArrayGetPtr(shaders, i));</div>
<div class="line">                <span class="keywordflow">if</span> (!shader)</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                <a class="code hl_function" href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#a161627255b44a69a262fb70ff028c892">PresenZ::Cryptomatte::PzAddMaterialToManifest</a>(AiNodeGetName(shader));</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    AiNodeIteratorDestroy(shape_iterator);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Callback invoked an image is finished.</span></div>
<div class="line">driver_close</div>
<div class="line">{</div>
<div class="line">    DriverData* data = (DriverData*)AiNodeGetLocalData(node);   </div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> objects, materials, assets = <span class="keyword">false</span>;</div>
<div class="line">    <a class="code hl_function" href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#a3404d8b67629d5291a6656c413729eaa">PresenZ::Cryptomatte::PzGetActiveCryptomatte</a>(objects, materials, assets);</div>
<div class="line">    <span class="keywordflow">if</span> (objects || materials || assets) {</div>
<div class="line">        </div>
<div class="line">        compileManifests(AiNodeGetUniverse(node), materials);</div>
<div class="line">    }</div>
<div class="line">    restoreAOVs(node);</div>
<div class="line">    <a class="code hl_function" href="group___pz_phase_api.html#ga593691219de55ef1887e6c62dae74abe">PzPhaseTerminate</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">driver_needs_bucket</div>
<div class="line">{</div>
<div class="line">    DriverData *data = (DriverData*)AiNodeGetLocalData(node);</div>
<div class="line">    <span class="keywordflow">if</span> (data-&gt;m_idValid == <span class="keyword">false</span>)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Callback invoked by Arnold when bucket (image sub zone) is going to be rendered.</span></div>
<div class="line">driver_prepare_bucket</div>
<div class="line">{</div>
<div class="line">    DriverData *data = (DriverData*)AiNodeGetLocalData(node);</div>
<div class="line">    <span class="keywordflow">if</span> (data-&gt;m_idValid == <span class="keyword">false</span>)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Callback invoked by Arnold when a bucket (image sub-zone) is finished, all s haded pixels are forwarded </span></div>
<div class="line"><span class="comment">// to PresenZ for further processing. </span></div>
<div class="line">driver_process_bucket</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> write_bucket_detect(AtNode* node, <span class="keyword">struct</span> AtOutputIterator* iterator, <span class="keyword">struct</span> AtAOVSampleIterator* sample_iterator, <span class="keywordtype">int</span> bucket_xo, <span class="keywordtype">int</span> bucket_yo, <span class="keywordtype">int</span> bucket_size_x, <span class="keywordtype">int</span> bucket_size_y)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span>* bucket_data;</div>
<div class="line">    AtString name;</div>
<div class="line">    <span class="keywordtype">int</span> type = AI_TYPE_UNDEFINED;</div>
<div class="line"> </div>
<div class="line">    FilterDataDetect** pixels_data;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (AiOutputIteratorGetNext(iterator, &amp;name, &amp;type, &amp;bucket_data)) {</div>
<div class="line">        <span class="keywordflow">if</span> (name == detectTBestCamStr) {</div>
<div class="line">            pixels_data = (FilterDataDetect**)bucket_data;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; bucket_size_y; ++j) {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bucket_size_x; ++i) {</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> in_idx = j * bucket_size_x + i;</div>
<div class="line">            <span class="keywordtype">size_t</span> dataSize = pixels_data[in_idx]-&gt;data.size();</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span> (dataSize != 0) {</div>
<div class="line">                <a class="code hl_function" href="group__bucket_a_p_i.html#ga4576780aee9296d244bc5c929b5cae92">PzFlushSamplesToFile</a>(pixels_data[in_idx]-&gt;data);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            std::vector&lt;PresenZ::DetectSample::SaveDataStructure&gt; empty_vector;</div>
<div class="line">            pixels_data[in_idx]-&gt;data.swap(empty_vector);</div>
<div class="line">            <span class="keyword">delete</span> pixels_data[in_idx];</div>
<div class="line">            pixels_data[in_idx] = <span class="keyword">nullptr</span>; <span class="comment">// Ensure the pointer is not left dangling</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> write_bucket_render(AtNode* node, <span class="keyword">struct</span> AtOutputIterator* iterator, <span class="keyword">struct</span> AtAOVSampleIterator* sample_iterator, <span class="keywordtype">int</span> bucket_xo, <span class="keywordtype">int</span> bucket_yo, <span class="keywordtype">int</span> bucket_size_x, <span class="keywordtype">int</span> bucket_size_y)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span>* bucket_data;</div>
<div class="line">    AtString name;</div>
<div class="line">    <span class="keywordtype">int</span> type = AI_TYPE_UNDEFINED;</div>
<div class="line"> </div>
<div class="line">    FilterData** pixels_data;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (AiOutputIteratorGetNext(iterator, &amp;name, &amp;type, &amp;bucket_data)) {</div>
<div class="line">        <span class="keywordflow">if</span> (name == RGBAAtStr) {</div>
<div class="line">            pixels_data = (FilterData**)bucket_data;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; bucket_size_y; ++j) {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bucket_size_x; ++i) {</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> in_idx = j * bucket_size_x + i;</div>
<div class="line">            <span class="keywordtype">size_t</span> dataSize = pixels_data[in_idx]-&gt;data.size();</div>
<div class="line">            <span class="keywordflow">if</span> (dataSize != 0) {</div>
<div class="line">                <a class="code hl_function" href="group__bucket_a_p_i.html#ga4576780aee9296d244bc5c929b5cae92">PzFlushSamplesToFile</a>(pixels_data[in_idx]-&gt;data);</div>
<div class="line">            }</div>
<div class="line">            std::vector&lt;PresenZ::RenderSample::PzFilteredSample&gt; empty_vector;</div>
<div class="line">            pixels_data[in_idx]-&gt;data.swap(empty_vector);  </div>
<div class="line">            <span class="keyword">delete</span> pixels_data[in_idx];</div>
<div class="line">            pixels_data[in_idx] = <span class="keyword">nullptr</span>; <span class="comment">// Ensure the pointer is not left dangling        </span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Callback invoked by Arnold when bucket (image sub-zone) is finished and can be dismissed.</span></div>
<div class="line">driver_write_bucket</div>
<div class="line">{</div>
<div class="line">    DriverData *data = (DriverData*)AiNodeGetLocalData(node);</div>
<div class="line">    <span class="keywordflow">if</span> (data-&gt;m_idValid == <span class="keyword">false</span>)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (PresenZ_data_struct::pass == PresenZ::Phase::Detect || PresenZ_data_struct::pass == PresenZ::Phase::Detect_Reflection)</div>
<div class="line">        write_bucket_detect(node, iterator, sample_iterator, bucket_xo, bucket_yo, bucket_size_x, bucket_size_y);</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PresenZ_data_struct::pass == PresenZ::Phase::Render || PresenZ_data_struct::pass == PresenZ::Phase::Render_Reflection)</div>
<div class="line">        write_bucket_render(node, iterator, sample_iterator, bucket_xo, bucket_yo, bucket_size_x, bucket_size_y);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="a_pz_camera_api_8h_html"><div class="ttname"><a href="_pz_camera_api_8h.html">PzCameraApi.h</a></div></div>
<div class="ttc" id="a_pz_cryptomatte_api_8h_html_a52a3717199fbc540c58210f997fb8bc6"><div class="ttname"><a href="_pz_cryptomatte_api_8h.html#a52a3717199fbc540c58210f997fb8bc6">PZ_CRYPTO_MAX_STRING_LENGTH</a></div><div class="ttdeci">#define PZ_CRYPTO_MAX_STRING_LENGTH</div><div class="ttdef"><b>Definition</b> PzCryptomatteApi.h:11</div></div>
<div class="ttc" id="agroup___n_o_z__vector_html_ga347d85f3e636cf273a47949aa0613a8f"><div class="ttname"><a href="group___n_o_z__vector.html#ga347d85f3e636cf273a47949aa0613a8f">NozVector</a></div><div class="ttdeci">NozPoint NozVector</div><div class="ttdoc">3D vector (single precision)</div><div class="ttdef"><b>Definition</b> vector.h:435</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_ga3ec2ec1cb88fd9a6ea0a115731dd753f"><div class="ttname"><a href="group___pz_app_logger.html#ga3ec2ec1cb88fd9a6ea0a115731dd753f">PresenZ::Logger::v4_0::PzSetConsole</a></div><div class="ttdeci">void PzSetConsole(bool enabled)</div><div class="ttdoc">Do you want the logs to appear in the STD out.</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_ga47dccb155300c8d87d86a3084b5ed685"><div class="ttname"><a href="group___pz_app_logger.html#ga47dccb155300c8d87d86a3084b5ed685">PresenZ::Logger::v4_0::PzSetProgressBarType</a></div><div class="ttdeci">void PzSetProgressBarType(ProgressBarType progressType)</div><div class="ttdoc">switch to an horizontal progress bax or to a vertical percentage counter</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_ga57c6b13b743e34cf547345173a7b8c4a"><div class="ttname"><a href="group___pz_app_logger.html#ga57c6b13b743e34cf547345173a7b8c4a">PresenZ::Logger::v4_0::PzSetLogLevelHeader</a></div><div class="ttdeci">void PzSetLogLevelHeader(bool enabled)</div><div class="ttdoc">Enable/disable logging in the header, if enabled the highest level of logging will be used.</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_ga57e4c432a80f1ffc8de1a41a42ac07d0"><div class="ttname"><a href="group___pz_app_logger.html#ga57e4c432a80f1ffc8de1a41a42ac07d0">PZ_WARNING</a></div><div class="ttdeci">#define PZ_WARNING(a,...)</div><div class="ttdoc">Printf-like define that forwards a WARNING message to PresenZ logging system.</div><div class="ttdef"><b>Definition</b> PzAppLogger.h:211</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_ga6a60b77d5b79c3fb2d4d98e36433404f"><div class="ttname"><a href="group___pz_app_logger.html#ga6a60b77d5b79c3fb2d4d98e36433404f">PresenZ::Logger::v4_0::PzSetDateHeader</a></div><div class="ttdeci">void PzSetDateHeader(bool enabled)</div><div class="ttdoc">Enable/disable the date/time header.</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_gaa4854eda2f578deaffb33e081b5fc398"><div class="ttname"><a href="group___pz_app_logger.html#gaa4854eda2f578deaffb33e081b5fc398">PresenZ::Logger::v4_0::PzSetCallbackCarriageReturnMode</a></div><div class="ttdeci">void PzSetCallbackCarriageReturnMode(CarriageReturnMode carriageMode)</div><div class="ttdoc">Force enable/disable end of line at each line forwarded to the callback.</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_gad553edc68869caef27062377dbd1fa3e"><div class="ttname"><a href="group___pz_app_logger.html#gad553edc68869caef27062377dbd1fa3e">PresenZ::Logger::v4_0::PzSetCallBackLogLevel</a></div><div class="ttdeci">void PzSetCallBackLogLevel(LogLevel lvl, AppLoggerCallback callback, void *userData)</div><div class="ttdoc">Set the loglevel, which will be the callback for the current application.</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_gad79dc53c351eeff13f901542c29f6e57"><div class="ttname"><a href="group___pz_app_logger.html#gad79dc53c351eeff13f901542c29f6e57">PZ_DEBUG</a></div><div class="ttdeci">#define PZ_DEBUG(a,...)</div><div class="ttdoc">Printf analog define that forwards a DEBUG message to PresenZ logging system.</div><div class="ttdef"><b>Definition</b> PzAppLogger.h:217</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_gaf8ab3f1606906a93b3081de7f0cb7be1"><div class="ttname"><a href="group___pz_app_logger.html#gaf8ab3f1606906a93b3081de7f0cb7be1">PZ_INFO</a></div><div class="ttdeci">#define PZ_INFO(a,...)</div><div class="ttdoc">Printf-like defined method that forwards an INFO message to PresenZ logging system.</div><div class="ttdef"><b>Definition</b> PzAppLogger.h:208</div></div>
<div class="ttc" id="agroup___pz_app_logger_html_gafd8b815a0f76d6b121f44f62d5730ee4"><div class="ttname"><a href="group___pz_app_logger.html#gafd8b815a0f76d6b121f44f62d5730ee4">PZ_ERROR</a></div><div class="ttdeci">#define PZ_ERROR(a,...)</div><div class="ttdoc">Printf analog define that forwards an ERROR message to PresenZ logging system.</div><div class="ttdef"><b>Definition</b> PzAppLogger.h:214</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga0e256374d02c493cea64e1413a0da7f1"><div class="ttname"><a href="group___pz_phase_api.html#ga0e256374d02c493cea64e1413a0da7f1">PresenZ::Phase::v4_0::PzSetFroxtrum</a></div><div class="ttdeci">void PzSetFroxtrum(const bool &amp;enabled=false)</div><div class="ttdoc">By default, froxtrum rendering is off.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga16b450c73fbfd9298b91d051b87fa3dd"><div class="ttname"><a href="group___pz_phase_api.html#ga16b450c73fbfd9298b91d051b87fa3dd">PresenZ::Phase::v4_0::PzSetOutputThreadSafety</a></div><div class="ttdeci">bool PzSetOutputThreadSafety(const bool &amp;threadSafe)</div><div class="ttdoc">Add a thread lock mechanism if the renderer is not thread safe when saving images.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga1a8e8cc90a1fa139011213a3115d80b7"><div class="ttname"><a href="group___pz_phase_api.html#ga1a8e8cc90a1fa139011213a3115d80b7">PresenZ::Phase::v4_0::PzSetDetectionSaveguard</a></div><div class="ttdeci">void PzSetDetectionSaveguard(const float &amp;blockNumber=8.0, unsigned char DSG_ORedFlags=DSG_error)</div><div class="ttdoc">Detection saveguard. trigger a safeguard action when the number of detect block is above blockNumber.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga1aca5cb52d6cc925c72a658a8cae0161"><div class="ttname"><a href="group___pz_phase_api.html#ga1aca5cb52d6cc925c72a658a8cae0161">PresenZ::Phase::v4_0::PzSetSpecularPointOffset</a></div><div class="ttdeci">void PzSetSpecularPointOffset(const NozVector &amp;specularPointOffset)</div><div class="ttdoc">Set which will be the POV used for computing specularity during the rendering phase.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga341b31b72158a06791d4d0e0606c427a"><div class="ttname"><a href="group___pz_phase_api.html#ga341b31b72158a06791d4d0e0606c427a">PresenZ::Phase::v4_0::PzSetCameraUpVector</a></div><div class="ttdeci">void PzSetCameraUpVector(const NozVector &amp;up)</div><div class="ttdoc">Set the camera Up Vector All rotation removed on the camera, in which axis(in scene space),...</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga536fd47146cb18c507f803356f5df1d9"><div class="ttname"><a href="group___pz_phase_api.html#ga536fd47146cb18c507f803356f5df1d9">PresenZ::Phase::v4_0::PzSetClippingSphere</a></div><div class="ttdeci">void PzSetClippingSphere(bool enabled, const NozVector &amp;worldPos=NozVector(0.0f), const float radius=100.0f, const bool clipInside=false)</div><div class="ttdoc">Set the clipping sphere (optional).</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga54617be279c0e9d7e6387abb143dbecb"><div class="ttname"><a href="group___pz_phase_api.html#ga54617be279c0e9d7e6387abb143dbecb">PresenZ::Phase::v4_0::PzRenderPhaseRegisterAov</a></div><div class="ttdeci">void PzRenderPhaseRegisterAov(const int &amp;iAlias, const char *name, const AOVType &amp;type)</div><div class="ttdoc">Function to register an AOV to presenZ. You can register an arbitrary number of AOV per pixel.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga593691219de55ef1887e6c62dae74abe"><div class="ttname"><a href="group___pz_phase_api.html#ga593691219de55ef1887e6c62dae74abe">PresenZ::Phase::v4_0::PzPhaseTerminate</a></div><div class="ttdeci">bool PzPhaseTerminate(const TerminatePhaseOptions &amp;option=WRITE_TO_DISC)</div><div class="ttdoc">Once rendering is finishing, PzPhaseTerminate has to be invoked.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga61484e9b774b113f22f6148d811ed715"><div class="ttname"><a href="group___pz_phase_api.html#ga61484e9b774b113f22f6148d811ed715">PresenZ::Phase::v4_0::PzComputeRenderingResolutionParameters</a></div><div class="ttdeci">const PzResolutionParam PzComputeRenderingResolutionParameters(const size_t &amp;blockNumber)</div><div class="ttdoc">Get the resolution to set the rendering engine and to process the phase with a custom number of block...</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga6263ef2247a2089acee99bf2dc4891cd"><div class="ttname"><a href="group___pz_phase_api.html#ga6263ef2247a2089acee99bf2dc4891cd">PresenZ::Phase::v4_0::PzSetRenderTransparencyMode</a></div><div class="ttdeci">void PzSetRenderTransparencyMode(const TransparencyRenderingType &amp;type=PRZ_REGULAR, float glassThickness=1.0f)</div><div class="ttdoc">Set which transparency pass you are about to render.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga6864add2dc016bfc5a1e1e980f8ce2cc"><div class="ttname"><a href="group___pz_phase_api.html#ga6864add2dc016bfc5a1e1e980f8ce2cc">PresenZ::Phase::v4_0::PzSetRenderScale</a></div><div class="ttdeci">void PzSetRenderScale(const double &amp;renderScale=1.0)</div><div class="ttdoc">Set the final scale of the 3D points, scaling by 0.1 will make everything 10 times closer.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga6cddcd34414f7cfd6d8c870e11dcfdac"><div class="ttname"><a href="group___pz_phase_api.html#ga6cddcd34414f7cfd6d8c870e11dcfdac">PresenZ::Phase::v4_0::PzSetOutputResolution</a></div><div class="ttdeci">void PzSetOutputResolution(const size_t &amp;resX, const size_t &amp;resY)</div><div class="ttdoc">Set the resolution that you want for the final PresenZ image (this value must be equal for each Phase...</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga770112d6d9328a4cc973dec788ec4c65"><div class="ttname"><a href="group___pz_phase_api.html#ga770112d6d9328a4cc973dec788ec4c65">PresenZ::Phase::v4_0::PzSetRenderInsideBox</a></div><div class="ttdeci">void PzSetRenderInsideBox(bool renderInside)</div><div class="ttdoc">Allow renders inside the render box (false by default, only outside (landscape mode) is renderer).</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga7759b42bda5736f78e2fecd80601d16e"><div class="ttname"><a href="group___pz_phase_api.html#ga7759b42bda5736f78e2fecd80601d16e">PresenZ::Phase::v4_0::PzSetOutFilePath</a></div><div class="ttdeci">void PzSetOutFilePath(const char *fullPathFile)</div><div class="ttdoc">Set the output file where you want the data (and intermediary data) to be saved.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga79970a419cce7b5c709765413c5d8fb2"><div class="ttname"><a href="group___pz_phase_api.html#ga79970a419cce7b5c709765413c5d8fb2">PresenZ::Phase::v4_0::PzSetWindowShapesFile</a></div><div class="ttdeci">void PzSetWindowShapesFile(const char *windowShapesFilePath, int windowShapeIndex)</div><div class="ttdoc">Render from a shape with custom camera positions,normals an priority, instead of a box zone of view.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga7aca27da0e5e0e838ec13de88a551a6d"><div class="ttname"><a href="group___pz_phase_api.html#ga7aca27da0e5e0e838ec13de88a551a6d">PresenZ::Phase::v4_0::PzSetCryptomatte</a></div><div class="ttdeci">bool PzSetCryptomatte(const bool &amp;objects, const bool &amp;materials, const bool &amp;assets, const int &amp;objDepth, const int &amp;matDepth, const int &amp;assetDepth)</div><div class="ttdoc">Set the Cryptomatte AOVs we want to output.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga8492ca6f6962498177d3a8a7f0e33b80"><div class="ttname"><a href="group___pz_phase_api.html#ga8492ca6f6962498177d3a8a7f0e33b80">PresenZ::Phase::v4_0::PzSetPresenZBucket</a></div><div class="ttdeci">bool PzSetPresenZBucket(const bool &amp;state)</div><div class="ttdoc">Set it to false if you are not using the PresenZ internal bucket system.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga8fb61701ff43f121a84599ecd7443656"><div class="ttname"><a href="group___pz_phase_api.html#ga8fb61701ff43f121a84599ecd7443656">PresenZ::Phase::v4_0::PzSetRenderingResolutionParameters</a></div><div class="ttdeci">bool PzSetRenderingResolutionParameters(const PzResolutionParam &amp;params)</div><div class="ttdoc">Once you have sorted out what will be the render target resolution, pass this information to PresenZ.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga949129ceea6602d8e188e8edde8c9596"><div class="ttname"><a href="group___pz_phase_api.html#ga949129ceea6602d8e188e8edde8c9596">PresenZ::Phase::v4_0::PzSetDeepReflection</a></div><div class="ttdeci">void PzSetDeepReflection(const Eye &amp;eye, const double &amp;IPD=63.5)</div><div class="ttdoc">Set Deep reflection data.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga9d205f548fd171cda282661a9c849b3d"><div class="ttname"><a href="group___pz_phase_api.html#ga9d205f548fd171cda282661a9c849b3d">PresenZ::Phase::v4_0::PzSetCurrentFrame</a></div><div class="ttdeci">void PzSetCurrentFrame(const int &amp;frameNumber, const size_t &amp;padding=4)</div><div class="ttdoc">Set which frame you are about to render.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_ga9e5a704692330cca20bc7cc81219228e"><div class="ttname"><a href="group___pz_phase_api.html#ga9e5a704692330cca20bc7cc81219228e">PresenZ::Phase::v4_0::PzSetZovScaling</a></div><div class="ttdeci">void PzSetZovScaling(const float &amp;scaleX, const float &amp;scaleY, const float &amp;scaleZ)</div><div class="ttdoc">Set the box scaling (in units) of the Zone of View.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gaa99ece6cbf6d1f8a07966bb2e17cbcb5"><div class="ttname"><a href="group___pz_phase_api.html#gaa99ece6cbf6d1f8a07966bb2e17cbcb5">PresenZ::Phase::v4_0::PzSetIdealPointSizeTarget</a></div><div class="ttdeci">void PzSetIdealPointSizeTarget(const double &amp;idealPointsize)</div><div class="ttdoc">lower the PresenZ definition by x2, x6 or x24 to prevent having points below a predefined size</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gaae62eec6ec456bd4c638f1c0b4bf470f"><div class="ttname"><a href="group___pz_phase_api.html#gaae62eec6ec456bd4c638f1c0b4bf470f">PresenZ::Phase::v4_0::PzSetZovOffset</a></div><div class="ttdeci">void PzSetZovOffset(const int &amp;offsetX, const int &amp;offsetY, const int &amp;offsetZ)</div><div class="ttdoc">Set the offset (in units) of the center of the Zone of View.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gaaf7df9d321491e87bd3fa52ad5c648a0"><div class="ttname"><a href="group___pz_phase_api.html#gaaf7df9d321491e87bd3fa52ad5c648a0">PresenZ::Phase::v4_0::PzSetDetectFilePath</a></div><div class="ttdeci">void PzSetDetectFilePath(const char *fullPathFile)</div><div class="ttdoc">Set the file path to the Detection File created during the first phase.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gab23e6ab698846a91a469c5a3c91fb5d0"><div class="ttname"><a href="group___pz_phase_api.html#gab23e6ab698846a91a469c5a3c91fb5d0">PresenZ::Phase::v4_0::PzSetExternalCounter</a></div><div class="ttdeci">void PzSetExternalCounter(const bool &amp;hasExternalCounter=false)</div><div class="ttdoc">Declare if we are using an external ray counter, using PzSetSamplesCount.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gab3f9a2ad1e2b489787fb177116e3e248"><div class="ttname"><a href="group___pz_phase_api.html#gab3f9a2ad1e2b489787fb177116e3e248">PresenZ::Phase::v4_0::PzSetFroxtrumDepth</a></div><div class="ttdeci">void PzSetFroxtrumDepth(const int &amp;depth=6)</div><div class="ttdoc">Set the depth density of frustrum.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gab7d28db69c251d7d1761412440d41068"><div class="ttname"><a href="group___pz_phase_api.html#gab7d28db69c251d7d1761412440d41068">PresenZ::Phase::v4_0::PzSetCameraToWorldMatrix</a></div><div class="ttdeci">void PzSetCameraToWorldMatrix(const NozMatrix &amp;camToWorld)</div><div class="ttdoc">Set the current camera transform.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gab97cf9e993c581aca0a1eb7401faf784"><div class="ttname"><a href="group___pz_phase_api.html#gab97cf9e993c581aca0a1eb7401faf784">PresenZ::Phase::v4_0::PzSetMotionVector</a></div><div class="ttdeci">void PzSetMotionVector(const bool &amp;detectMotionVector)</div><div class="ttdoc">Set motion vector computation.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gabeff0a36ad7a222a509922e10096c20f"><div class="ttname"><a href="group___pz_phase_api.html#gabeff0a36ad7a222a509922e10096c20f">PresenZ::Phase::v4_0::PzSetDraft</a></div><div class="ttdeci">void PzSetDraft(const bool &amp;isDraft=true)</div><div class="ttdoc">Set to true if you want to shortcut the rendering and have a quick preview.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gabfdb2cfc6e11bc80cc3d8f27bff0768e"><div class="ttname"><a href="group___pz_phase_api.html#gabfdb2cfc6e11bc80cc3d8f27bff0768e">PresenZ::Phase::v4_0::PzSetDistanceToGround</a></div><div class="ttdeci">void PzSetDistanceToGround(const double &amp;distanceToGround=1.6)</div><div class="ttdoc">Set what is the estimated distance from ground.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gacfccac9e817766726140bc8ee2ce0ae5"><div class="ttname"><a href="group___pz_phase_api.html#gacfccac9e817766726140bc8ee2ce0ae5">PresenZ::Phase::v4_0::PzInitPhase</a></div><div class="ttdeci">void PzInitPhase(const Phase &amp;phase, const PresenZ::Util::RenderingEngineId &amp;renderEngineId)</div><div class="ttdoc">This is the very first call to PresenZ.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gae379dd62e45b425b22c82f70455acfb8"><div class="ttname"><a href="group___pz_phase_api.html#gae379dd62e45b425b22c82f70455acfb8">PresenZ::Phase::v4_0::PzSetDetectionMinimumDistance</a></div><div class="ttdeci">void PzSetDetectionMinimumDistance(double minimumDistance)</div><div class="ttdoc">enforce PresenZ to perform the detection from a distance (in cm ) bigger than the input parameter.</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gae9136a619889cbaeddc60ea57063cd96"><div class="ttname"><a href="group___pz_phase_api.html#gae9136a619889cbaeddc60ea57063cd96">PresenZ::Phase::v4_0::PzSetCurrentBlockIndex</a></div><div class="ttdeci">bool PzSetCurrentBlockIndex(const size_t &amp;blockIndex)</div><div class="ttdoc">If you are in blocked mode: you will have to specify which block you are currently rendering to Prese...</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gaec78fb6ddee0e55ac6524b5eaa5dcbfb"><div class="ttname"><a href="group___pz_phase_api.html#gaec78fb6ddee0e55ac6524b5eaa5dcbfb">PresenZ::Phase::v4_0::PzPhaseBegin</a></div><div class="ttdeci">bool PzPhaseBegin()</div><div class="ttdoc">After initialization and once you have invoked all the necessary Setters (see above).</div></div>
<div class="ttc" id="agroup___pz_phase_api_html_gaf893250a30d9bea6182a59fbe66dbe9c"><div class="ttname"><a href="group___pz_phase_api.html#gaf893250a30d9bea6182a59fbe66dbe9c">PresenZ::Phase::v4_0::PzSetThreadNumber</a></div><div class="ttdeci">void PzSetThreadNumber(const size_t &amp;bucketNumber)</div><div class="ttdoc">Set the number of thread that will perform the rendering.</div></div>
<div class="ttc" id="agroup__bucket_a_p_i_html_ga4576780aee9296d244bc5c929b5cae92"><div class="ttname"><a href="group__bucket_a_p_i.html#ga4576780aee9296d244bc5c929b5cae92">PresenZ::BinIO::v4_0::PzFlushSamplesToFile</a></div><div class="ttdeci">bool PzFlushSamplesToFile(std::vector&lt; PresenZ::DetectSample::SaveDataStructure &gt; &amp;detectionsSamples)</div><div class="ttdoc">Flush the result to the disk, returns true if successful.</div></div>
<div class="ttc" id="amatrix_8h_html_a15eb5c4da255c65c60623dc95ca45bc1"><div class="ttname"><a href="matrix_8h.html#a15eb5c4da255c65c60623dc95ca45bc1">NozMatrix</a></div><div class="ttdeci">std::array&lt; std::array&lt; float, 4 &gt;, 4 &gt; NozMatrix</div><div class="ttdef"><b>Definition</b> matrix.h:8</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_camera_html"><div class="ttname"><a href="namespace_presen_z_1_1_camera.html">PresenZ::Camera</a></div><div class="ttdef"><b>Definition</b> PzCameraApi.h:15</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_cryptomatte_1_1v4__0_html_a161627255b44a69a262fb70ff028c892"><div class="ttname"><a href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#a161627255b44a69a262fb70ff028c892">PresenZ::Cryptomatte::v4_0::PzAddMaterialToManifest</a></div><div class="ttdeci">void PzAddMaterialToManifest(const char *name)</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_cryptomatte_1_1v4__0_html_ae631ac509ed7d825f83e331ee413f610"><div class="ttname"><a href="namespace_presen_z_1_1_cryptomatte_1_1v4__0.html#ae631ac509ed7d825f83e331ee413f610">PresenZ::Cryptomatte::v4_0::PzAddObjectToManifest</a></div><div class="ttdeci">void PzAddObjectToManifest(const char *name)</div></div>
<div class="ttc" id="anamespace_presen_z_1_1_phase_1_1_p_r_e_s_e_n_z___v_e_r_s_i_o_n___n_s_html_ae1c5184dc404edf057ed537bcfddef84ac677a954de25220db675695edacb4f71"><div class="ttname"><a href="namespace_presen_z_1_1_phase_1_1_p_r_e_s_e_n_z___v_e_r_s_i_o_n___n_s.html#ae1c5184dc404edf057ed537bcfddef84ac677a954de25220db675695edacb4f71">PresenZ::Phase::PRESENZ_VERSION_NS::Render</a></div><div class="ttdeci">@ Render</div><div class="ttdoc">Render phase.</div><div class="ttdef"><b>Definition</b> PzConstants.h:85</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
